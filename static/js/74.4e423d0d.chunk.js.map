{"version":3,"file":"static/js/74.4e423d0d.chunk.js","mappings":"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","sources":["assets/images/weapons|sync|nonrecursive|/.(png%7Cjpe?g%7Csvg%7Cwebp)$","utils/gradeColor.js","components/EnhSim/SpecialWeapon/SpecialWeapon.styles.js","components/EnhSim/SpecialWeapon/SpecialWeapon.js","components/EnhSim/ClassWeapon/ClassWeapon.js","components/EnhSim/EnhSim.js"],"sourcesContent":["var map = {\n\t\"./abyss_sword.webp\": 5035,\n\t\"./abyss_sword_old.webp\": 4677,\n\t\"./acheron.webp\": 8607,\n\t\"./arcana.webp\": 9465,\n\t\"./arteon.webp\": 1966,\n\t\"./awakened_gold_moon.webp\": 5147,\n\t\"./awakened_olympus.webp\": 2525,\n\t\"./awakened_valhalla.webp\": 7257,\n\t\"./battle_dancer.webp\": 9177,\n\t\"./blast.webp\": 3907,\n\t\"./blaster.webp\": 9384,\n\t\"./blink.webp\": 7135,\n\t\"./blitz_dagger.webp\": 3289,\n\t\"./bracelet_of_life.webp\": 3768,\n\t\"./bunny_bunny.webp\": 7978,\n\t\"./carrot_ball.webp\": 4220,\n\t\"./cayenne.webp\": 4796,\n\t\"./death_fire.webp\": 8284,\n\t\"./death_grip.webp\": 2524,\n\t\"./death_grip_old.webp\": 7974,\n\t\"./dragonia.webp\": 8742,\n\t\"./easter.webp\": 1997,\n\t\"./easter_old.webp\": 9703,\n\t\"./echo.webp\": 5078,\n\t\"./echo_old.webp\": 2440,\n\t\"./egg_boom.webp\": 9118,\n\t\"./evergreen.webp\": 3350,\n\t\"./flame.webp\": 730,\n\t\"./flame_wand.webp\": 1521,\n\t\"./flamos.webp\": 2629,\n\t\"./frost_wand.webp\": 4850,\n\t\"./frozen_staff.webp\": 8612,\n\t\"./frozen_staff_old.webp\": 3502,\n\t\"./gold_moon.webp\": 3335,\n\t\"./guardians_shield.webp\": 1471,\n\t\"./haken.webp\": 3922,\n\t\"./hastur_staff.webp\": 9001,\n\t\"./hastur_staff_old.webp\": 1491,\n\t\"./holy_burst_hammer.webp\": 31,\n\t\"./ignis.webp\": 2883,\n\t\"./illusion_shuriken.webp\": 2634,\n\t\"./lethe.webp\": 4243,\n\t\"./lightning_gauntlets.webp\": 2223,\n\t\"./lightning_wand.webp\": 293,\n\t\"./lindell_staff.webp\": 7496,\n\t\"./lucion.webp\": 6093,\n\t\"./lucky_bag.webp\": 4792,\n\t\"./lumiere_harp.webp\": 4832,\n\t\"./nightfall.webp\": 6345,\n\t\"./olympus.webp\": 7154,\n\t\"./otterment.webp\": 8119,\n\t\"./phlegethon.webp\": 6745,\n\t\"./plasma_staff.webp\": 1152,\n\t\"./pletan.webp\": 245,\n\t\"./radiant.webp\": 9234,\n\t\"./ragnarhelm.webp\": 5580,\n\t\"./raven_wand.webp\": 3830,\n\t\"./rhapsody.webp\": 6701,\n\t\"./rhapsody_old.webp\": 1652,\n\t\"./ring_of_life.webp\": 7446,\n\t\"./rocket_launcher.webp\": 4164,\n\t\"./santa_staff.webp\": 4005,\n\t\"./shadow_dagger.webp\": 1262,\n\t\"./shadow_knight.webp\": 8213,\n\t\"./shadow_sword.webp\": 841,\n\t\"./slate_weaver.webp\": 3341,\n\t\"./solar_scepter.webp\": 4913,\n\t\"./soul_binder.webp\": 9,\n\t\"./spirit_axe.webp\": 6049,\n\t\"./spring_shot.webp\": 5503,\n\t\"./spring_shot_old.webp\": 2073,\n\t\"./storm_leon.webp\": 9135,\n\t\"./summer_shine.webp\": 654,\n\t\"./summer_sword.webp\": 4380,\n\t\"./swift_bow.webp\": 69,\n\t\"./sylvania.webp\": 1136,\n\t\"./sylvania_crossbow.webp\": 3829,\n\t\"./sylvanir_bow.webp\": 946,\n\t\"./terra_hammer.webp\": 8682,\n\t\"./upgrade_gold_moon.webp\": 3704,\n\t\"./upgrade_olympus.webp\": 8013,\n\t\"./upgrade_valhalla.webp\": 3337,\n\t\"./valhalla.webp\": 8340,\n\t\"./wind_staff.webp\": 3980,\n\t\"./wither_scoop.webp\": 6443,\n\t\"./wither_staff.webp\": 6613,\n\t\"./zephyr.webp\": 1309\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4749;","export const getCardColorByGrade = (grade) => {\r\n  switch (grade) {\r\n    case \"필멸\":\r\n      return \"#d32f2f\"; // 빨간색 계열\r\n    case \"전설\":\r\n      return \"#fbc02d\"; // 노란색 계열\r\n    case \"영웅\":\r\n      return \"#9c27b0\"; // 보라색 계열\r\n    case \"운명\":\r\n      return \"#1565c0\"; // 어두운 파란색 계열\r\n    case \"희귀\":\r\n      return \"#1976d2\"; // 파란색 계열\r\n    case \"고급\":\r\n      return \"#388e3c\"; // 녹색 계열\r\n    case \"보스\":\r\n      return \"#ffb6c1\"; // 연분홍색 계열\r\n    case \"기타\":\r\n      return \"#66cdaa\"; // 민트색 계열\r\n    case \"일반\":\r\n    default:\r\n      return \"#616161\"; // 회색 계열\r\n  }\r\n};\r\n","import { getCardColorByGrade } from \"../../../utils/gradeColor\";\r\n\r\nexport const selectedWeaponPaper = {\r\n  p: 2,\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  gap: 2,\r\n};\r\n\r\nexport const weaponImage = {\r\n  width: 80,\r\n  height: 80,\r\n  objectFit: \"contain\",\r\n  backgroundColor: \"rgba(0,0,0,0.05)\",\r\n  borderRadius: 1,\r\n};\r\n\r\nexport const weaponName = {\r\n  fontWeight: \"bold\",\r\n};\r\n\r\nexport const modalStyle = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"90%\",\r\n  maxWidth: 500,\r\n  bgcolor: \"background.paper\",\r\n  border: \"2px solid #000\",\r\n  boxShadow: 24,\r\n  p: 2,\r\n  maxHeight: \"80vh\",\r\n  overflowY: \"auto\",\r\n};\r\n\r\nexport const modalGrid = {\r\n  display: \"grid\",\r\n  gridTemplateColumns: \"repeat(3, 1fr)\",\r\n  gap: 1,\r\n};\r\n\r\nexport const modalWeaponCard = (grade) => ({\r\n  border: \"1px solid #ddd\",\r\n  textAlign: \"center\",\r\n  backgroundColor: getCardColorByGrade(grade),\r\n  color: \"white\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  justifyContent: \"space-between\",\r\n});\r\n\r\nexport const modalWeaponImage = {\r\n  width: \"100%\",\r\n  height: 60,\r\n  objectFit: \"contain\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.1)\",\r\n};\r\n\r\nexport const modalWeaponName = {\r\n  fontSize: \"0.75rem\",\r\n  p: 1,\r\n};\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  useMemo,\r\n  useCallback,\r\n} from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  CircularProgress,\r\n  Paper,\r\n  Button,\r\n  Modal,\r\n  Card,\r\n  CardActionArea,\r\n  CardMedia,\r\n  CardContent,\r\n  Menu,\r\n  MenuItem,\r\n  Switch,\r\n  FormControlLabel,\r\n  Snackbar,\r\n} from \"@mui/material\";\r\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\r\nimport { CacheContext } from \"../../../contexts/CacheContext\";\r\nimport * as styles from \"./SpecialWeapon.styles\";\r\n\r\n// Weapons.js와 동일한 Google Sheet 정보를 사용합니다.\r\nconst BASE_URL_ID = \"1IZra9ZZRwBBgT4ai1W0fCATeFFsztHnF0k03DmLr1tI\";\r\nconst WEAPONS_GID = \"0\";\r\nconst GUARANTEED_ENH_GID = \"2088796296\"; // 확정 강화 비용 시트 GID\r\nconst PROB_ENH_GID = \"665507476\"; // 확률 강화 비용 시트 GID\r\n\r\nconst WEAPONS_SHEET_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${WEAPONS_GID}`;\r\nconst GUARANTEED_ENH_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${GUARANTEED_ENH_GID}`;\r\nconst PROB_ENH_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${PROB_ENH_GID}`;\r\n\r\n// 무기 이미지 로드\r\nconst images = require.context(\r\n  \"../../../assets/images/weapons\",\r\n  false,\r\n  /\\.(png|jpe?g|svg|webp)$/\r\n);\r\n\r\nconst weaponImages = images.keys().reduce((acc, item) => {\r\n  const key = item.replace(\"./\", \"\");\r\n  acc[key] = images(item);\r\n  return acc;\r\n}, {});\r\n\r\nconst SIM_STATE_CACHE_KEY = \"specialWeaponEnhSimState\";\r\n\r\nexport default function SpecialWeapon() {\r\n  const { cache, setCacheValue } = useContext(CacheContext);\r\n  const [weapons, setWeapons] = useState([]);\r\n  const [guaranteedEnhCosts, setGuaranteedEnhCosts] = useState([]);\r\n  const [probEnhCosts, setProbEnhCosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const initialTotalCosts = {\r\n    gold: 0,\r\n    formlessShards: 0,\r\n    refinedStones: 0,\r\n    rawOres: 0,\r\n    purplePowder: 0,\r\n    yellowPowder: 0,\r\n    consumedWeapons: {},\r\n  };\r\n\r\n  // useState의 지연 초기화(lazy initial state)를 사용하여 sessionStorage에서 totalCosts를 한 번만 읽어옵니다.\r\n  const [selectedWeaponName, setSelectedWeaponName] = useState(() => {\r\n    try {\r\n      const savedStateJSON = sessionStorage.getItem(SIM_STATE_CACHE_KEY);\r\n      if (savedStateJSON) {\r\n        const savedState = JSON.parse(savedStateJSON);\r\n        // uniqueWeaponNames가 아직 계산되지 않았으므로, 우선 저장된 이름을 반환합니다.\r\n        // 이후 useEffect에서 유효성을 검사하고 초기화할 수 있습니다.\r\n        return savedState.selectedWeaponName || \"\";\r\n      }\r\n    } catch (error) {\r\n      console.error(\r\n        \"Failed to parse selectedWeaponName from sessionStorage\",\r\n        error\r\n      );\r\n    }\r\n    return \"\";\r\n  });\r\n\r\n  const [currentLevel, setCurrentLevel] = useState(() => {\r\n    try {\r\n      const savedStateJSON = sessionStorage.getItem(SIM_STATE_CACHE_KEY);\r\n      if (savedStateJSON) {\r\n        const savedState = JSON.parse(savedStateJSON);\r\n        return savedState.currentLevel || 0;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to parse currentLevel from sessionStorage\", error);\r\n    }\r\n    return 0;\r\n  });\r\n\r\n  const [totalCosts, setTotalCosts] = useState(() => {\r\n    try {\r\n      const savedStateJSON = sessionStorage.getItem(SIM_STATE_CACHE_KEY);\r\n      if (savedStateJSON) {\r\n        const savedState = JSON.parse(savedStateJSON);\r\n        if (savedState.totalCosts) {\r\n          // 호환성을 위해 consumedWeapons가 객체인지 확인\r\n          if (\r\n            typeof savedState.totalCosts.consumedWeapons !== \"object\" ||\r\n            savedState.totalCosts.consumedWeapons === null\r\n          ) {\r\n            savedState.totalCosts.consumedWeapons = {};\r\n          }\r\n          return savedState.totalCosts;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to parse totalCosts from sessionStorage\", error);\r\n    }\r\n    // 저장된 값이 없거나 오류 발생 시 초기값 반환\r\n    return initialTotalCosts;\r\n  });\r\n\r\n  const [skipMenuAnchorEl, setSkipMenuAnchorEl] = useState(null);\r\n  const [isFallPreventionOn, setIsFallPreventionOn] = useState(false);\r\n  const [isResetPreventionOn, setIsResetPreventionOn] = useState(false);\r\n  const [snackbarInfo, setSnackbarInfo] = useState({\r\n    open: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const getBaseWeaponData = useCallback(\r\n    (name) => {\r\n      return (\r\n        weapons.find(\r\n          (w) => w[\"이름\"] === name && parseInt(w[\"강화 차수\"], 10) === 0\r\n        ) || weapons.find((w) => w[\"이름\"] === name)\r\n      );\r\n    },\r\n    [weapons]\r\n  );\r\n\r\n  const uniqueWeaponNames = useMemo(() => {\r\n    // 하드코딩으로 제외할 무기 이름 목록\r\n    const excludedNames = new Set([\r\n      // 여기에 제외할 무기 이름을 추가하세요. 예: \"제외할 무기\"\r\n      \"방랑자, 플레탄\",\r\n      \"서머 샤인\",\r\n      \"오터먼트\",\r\n      \"생명의 반지\",\r\n      \"플레임\",\r\n      \"실바니아\",\r\n      \"산타 스태프\",\r\n      \"섀도우 소드\",\r\n      \"섀도우 대거\",\r\n    ]);\r\n\r\n    // 하드코딩으로 제외할 무기 등급 목록\r\n    const excludedGrades = new Set([\r\n      // 여기에 제외할 등급을 추가하세요. 예: \"일반\"\r\n      \"보스\",\r\n      \"운명\",\r\n      \"기타\",\r\n    ]);\r\n\r\n    // 각 무기 이름의 등장 횟수를 계산합니다.\r\n    const nameCounts = weapons.reduce((acc, w) => {\r\n      const name = w[\"이름\"];\r\n      if (name) {\r\n        acc[name] = (acc[name] || 0) + 1;\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    // 모든 고유한 무기 이름 목록을 가져옵니다.\r\n    const allUniqueNames = Array.from(new Set(weapons.map((w) => w[\"이름\"])));\r\n\r\n    // 필터링 적용:\r\n    // 1. 강화 단계가 2개 이상 (강화 가능)\r\n    // 2. 제외 이름 목록에 포함되지 않음\r\n    // 3. 제외 등급 목록에 포함되지 않음\r\n    return allUniqueNames.filter((name) => {\r\n      if (!name || nameCounts[name] <= 1 || excludedNames.has(name)) {\r\n        return false;\r\n      }\r\n      const weapon = getBaseWeaponData(name);\r\n      return weapon && !excludedGrades.has(weapon[\"등급\"]);\r\n    });\r\n  }, [weapons, getBaseWeaponData]);\r\n\r\n  // 데이터 로드 후, 저장된 무기 이름이 유효하지 않으면 초기화\r\n  useEffect(() => {\r\n    if (\r\n      uniqueWeaponNames.length > 0 &&\r\n      selectedWeaponName &&\r\n      !uniqueWeaponNames.includes(selectedWeaponName)\r\n    ) {\r\n      setSelectedWeaponName(\"\");\r\n    }\r\n  }, [uniqueWeaponNames, selectedWeaponName]); // uniqueWeaponNames가 로드된 후 실행\r\n\r\n  // 상태 변경 시 sessionStorage에 저장\r\n  useEffect(() => {\r\n    const stateToSave = { selectedWeaponName, currentLevel, totalCosts };\r\n    sessionStorage.setItem(SIM_STATE_CACHE_KEY, JSON.stringify(stateToSave));\r\n  }, [selectedWeaponName, currentLevel, totalCosts]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const fetchAndParse = async (url, cacheKey) => {\r\n        if (cache[cacheKey]) {\r\n          return cache[cacheKey];\r\n        }\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n          throw new Error(`'${cacheKey}' 데이터를 가져오는 데 실패했습니다.`);\r\n        }\r\n        const csvText = await response.text();\r\n        return new Promise((resolve, reject) => {\r\n          Papa.parse(csvText, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete: (results) => {\r\n              const data = results.data.filter((row) =>\r\n                Object.values(row).some((val) => val && val.trim() !== \"\")\r\n              );\r\n              setCacheValue(cacheKey, data);\r\n              resolve(data);\r\n            },\r\n            error: (err) => reject(new Error(err.message)),\r\n          });\r\n        });\r\n      };\r\n\r\n      try {\r\n        const [weaponsData, guaranteedData, probData] = await Promise.all([\r\n          fetchAndParse(WEAPONS_SHEET_URL, \"weapons\"),\r\n          fetchAndParse(GUARANTEED_ENH_URL, \"guaranteedEnhCosts\"),\r\n          fetchAndParse(PROB_ENH_URL, \"probEnhCosts\"),\r\n        ]);\r\n\r\n        setWeapons(weaponsData);\r\n        setGuaranteedEnhCosts(guaranteedData);\r\n        setProbEnhCosts(probData);\r\n      } catch (e) {\r\n        setError(e.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [cache, setCacheValue]);\r\n\r\n  const selectedWeaponData = useMemo(() => {\r\n    if (!selectedWeaponName) return null;\r\n    // 0강 데이터를 우선적으로 찾거나, 없으면 첫 번째 데이터를 사용\r\n    return (\r\n      weapons.find(\r\n        (w) =>\r\n          w[\"이름\"] === selectedWeaponName && parseInt(w[\"강화 차수\"], 10) === 0\r\n      ) || weapons.find((w) => w[\"이름\"] === selectedWeaponName)\r\n    );\r\n  }, [weapons, selectedWeaponName]);\r\n\r\n  const availableEnhancementLevels = useMemo(() => {\r\n    if (!selectedWeaponName) return [];\r\n    return weapons\r\n      .filter((w) => w[\"이름\"] === selectedWeaponName)\r\n      .map((w) => parseInt(w[\"강화 차수\"], 10))\r\n      .filter((level) => !isNaN(level))\r\n      .sort((a, b) => a - b);\r\n  }, [weapons, selectedWeaponName]);\r\n\r\n  const handleSkipMenuOpen = (event) => {\r\n    setSkipMenuAnchorEl(event.currentTarget);\r\n  };\r\n  const handleSkipMenuClose = () => setSkipMenuAnchorEl(null);\r\n\r\n  const handleOpenModal = () => setIsModalOpen(true);\r\n  const handleCloseModal = () => setIsModalOpen(false);\r\n\r\n  const guaranteedEnhCost = useMemo(() => {\r\n    if (!selectedWeaponData) return null;\r\n\r\n    const nextLevel = currentLevel + 1;\r\n    return guaranteedEnhCosts.find(\r\n      (cost) =>\r\n        cost[\"등급\"] === selectedWeaponData[\"등급\"] &&\r\n        parseInt(cost[\"강화 차수\"], 10) === nextLevel\r\n    );\r\n  }, [selectedWeaponData, currentLevel, guaranteedEnhCosts]);\r\n\r\n  const probEnhCost = useMemo(() => {\r\n    if (!selectedWeaponData) return null;\r\n\r\n    const nextLevel = currentLevel + 1;\r\n    return probEnhCosts.find(\r\n      (cost) =>\r\n        cost[\"등급\"] === selectedWeaponData[\"등급\"] &&\r\n        parseInt(cost[\"강화 차수\"], 10) === nextLevel\r\n    );\r\n  }, [selectedWeaponData, currentLevel, probEnhCosts]);\r\n\r\n  const displayProbabilities = useMemo(() => {\r\n    if (!probEnhCost) return null;\r\n\r\n    let success = parseFloat(probEnhCost[\"성공 확률\"]) || 0;\r\n    let maintain = parseFloat(probEnhCost[\"실패 확률\"]) || 0;\r\n    let fall = parseFloat(probEnhCost[\"하락 확률\"]) || 0;\r\n    let reset = parseFloat(probEnhCost[\"리셋 확률\"]) || 0;\r\n\r\n    if (isFallPreventionOn) {\r\n      const reducedSuccess = success / 2;\r\n      maintain += reducedSuccess; // 감소한 성공 확률만큼 유지 확률 증가\r\n      maintain += fall; // 기존 하락 확률을 유지 확률에 더함\r\n      success = reducedSuccess; // 성공 확률 절반으로 감소\r\n      fall = 0; // 하락 확률은 0이 됨\r\n    }\r\n\r\n    return {\r\n      success,\r\n      maintain,\r\n      fall,\r\n      reset,\r\n    };\r\n  }, [probEnhCost, isFallPreventionOn]);\r\n\r\n  const handleWeaponSelect = (name) => {\r\n    setSelectedWeaponName(name);\r\n    setCurrentLevel(0); // 무기 선택 시 강화 레벨 초기화\r\n    handleCloseModal();\r\n  };\r\n\r\n  // 무기가 바뀌면 방지 옵션 초기화\r\n  useEffect(() => {\r\n    setIsFallPreventionOn(false);\r\n    setIsResetPreventionOn(false);\r\n  }, [selectedWeaponName]);\r\n\r\n  // 강화 레벨이 바뀔 때, 사용 불가능해진 방지 옵션만 초기화\r\n  useEffect(() => {\r\n    const nextProbEnhCost = probEnhCosts.find(\r\n      (cost) =>\r\n        cost[\"등급\"] === selectedWeaponData?.[\"등급\"] &&\r\n        parseInt(cost[\"강화 차수\"], 10) === currentLevel + 1\r\n    );\r\n\r\n    if (!(parseFloat(nextProbEnhCost?.[\"하락 확률\"]) > 0))\r\n      setIsFallPreventionOn(false);\r\n    if (!(parseFloat(nextProbEnhCost?.[\"리셋 확률\"]) > 0))\r\n      setIsResetPreventionOn(false);\r\n  }, [currentLevel, probEnhCosts, selectedWeaponData]);\r\n\r\n  const handleGuaranteedEnhance = () => {\r\n    if (!guaranteedEnhCost) return;\r\n\r\n    const goldCost = parseInt(guaranteedEnhCost[\"골드\"], 10) || 0;\r\n    const shardCost = parseInt(guaranteedEnhCost[\"무형의 파편\"], 10) || 0;\r\n\r\n    setTotalCosts((prev) => ({\r\n      ...prev,\r\n      gold: prev.gold + goldCost,\r\n      formlessShards: prev.formlessShards + shardCost,\r\n      // 확정 강화는 다른 재화를 소모하지 않으므로 나머지는 그대로 유지\r\n    }));\r\n\r\n    setCurrentLevel((prev) => prev + 1);\r\n  };\r\n\r\n  const handleProbEnhance = () => {\r\n    if (!probEnhCost) return;\r\n\r\n    let goldCost = parseInt(probEnhCost[\"골드\"], 10) || 0;\r\n    const refinedStoneCost = parseInt(probEnhCost[\"정교한 강화석\"], 10) || 0;\r\n    const rawOreCost = parseInt(probEnhCost[\"미가공 강화 원석\"], 10) || 0;\r\n\r\n    let successRate = parseFloat(probEnhCost[\"성공 확률\"]) || 0;\r\n    let fallRate = parseFloat(probEnhCost[\"하락 확률\"]) || 0; // '하락 확률' 열을 사용\r\n    const resetRate = parseFloat(probEnhCost[\"리셋 확률\"]) || 0;\r\n    // '실패 확률'은 이제 '유지 확률'을 의미합니다.\r\n    // let failAndMaintainRate = parseFloat(probEnhCost[\"실패 확률\"]) || 0;\r\n\r\n    if (isFallPreventionOn) {\r\n      goldCost += parseInt(probEnhCost[\"하락 방지 비용\"], 10) || 0;\r\n\r\n      const reducedSuccessRate = successRate / 2;\r\n      // failAndMaintainRate += reducedSuccessRate; // 감소한 성공 확률만큼 실패(유지) 확률 증가\r\n      // failAndMaintainRate += fallRate; // 기존 하락 확률을 실패(유지) 확률에 더함\r\n      successRate = reducedSuccessRate; // 성공 확률 절반으로 감소\r\n      fallRate = 0; // 하락 확률은 0이 됨\r\n    }\r\n    if (isResetPreventionOn) {\r\n      goldCost += parseInt(probEnhCost[\"리셋 방지 비용\"], 10) || 0;\r\n    }\r\n\r\n    // 리셋 방지 시 추가 아이템 소모량 계산을 위한 함수\r\n    const getPowderCostByLevel = (level) => {\r\n      if (level >= 7 && level <= 9) return 1;\r\n      if (level >= 10 && level <= 12) return 2;\r\n      if (level >= 13 && level <= 15) return 3;\r\n      return 0;\r\n    };\r\n\r\n    const rand = Math.random();\r\n    let resultMessage = \"\";\r\n    let additionalCosts = {\r\n      gold: goldCost,\r\n      refinedStones: refinedStoneCost,\r\n      rawOres: rawOreCost,\r\n      purplePowder: 0,\r\n      yellowPowder: 0,\r\n    };\r\n\r\n    if (rand < successRate) {\r\n      // 성공\r\n      setCurrentLevel((prev) => prev + 1);\r\n      resultMessage = `강화 성공! (+${currentLevel + 1})`;\r\n    } else if (rand < successRate + fallRate) {\r\n      // 성공 확률 다음은 하락 확률 구간\r\n      // 실패 (하락)\r\n      if (!isFallPreventionOn) {\r\n        setCurrentLevel((prev) => Math.max(0, prev - 1));\r\n        resultMessage = `강화 실패... (${\r\n          currentLevel > 0 ? `+${currentLevel - 1}로 하락` : \"변동 없음\"\r\n        })`;\r\n      } else {\r\n        resultMessage = \"강화 실패! (하락 방지됨)\";\r\n      }\r\n    } else if (rand < successRate + fallRate + resetRate) {\r\n      // 그 다음은 리셋 확률 구간\r\n      // 리셋\r\n      if (!isResetPreventionOn) {\r\n        setCurrentLevel(0);\r\n        resultMessage = \"강화 리셋... (+0)\";\r\n      } else {\r\n        // 리셋 방지가 실제로 적용되었을 때 추가 아이템 소모\r\n        const weaponGrade = selectedWeaponData[\"등급\"];\r\n        let additionalResultMessage = \"\";\r\n\r\n        if (weaponGrade === \"필멸\") {\r\n          // 이 비용은 setTotalCosts에서 직접 처리\r\n          additionalResultMessage = \" (동일 무기 1개 소모)\";\r\n        } else if (weaponGrade === \"영웅\" || weaponGrade === \"전설\") {\r\n          const powderCost = getPowderCostByLevel(currentLevel); // 현재 레벨 기준\r\n          if (powderCost > 0) {\r\n            if (weaponGrade === \"영웅\") {\r\n              additionalCosts.purplePowder += powderCost;\r\n              additionalResultMessage = ` (보라색 가루 ${powderCost}개 소모)`;\r\n            } else {\r\n              additionalCosts.yellowPowder += powderCost;\r\n              additionalResultMessage = ` (노란색 가루 ${powderCost}개 소모)`;\r\n            }\r\n          }\r\n        }\r\n\r\n        resultMessage = `강화 실패! (리셋 방지됨)${additionalResultMessage}`;\r\n      }\r\n    } else {\r\n      // 나머지는 모두 유지 구간\r\n      // 유지\r\n      resultMessage = \"강화 실패! (등급 유지)\";\r\n    }\r\n\r\n    setTotalCosts((prev) => ({\r\n      ...prev,\r\n      gold: prev.gold + additionalCosts.gold,\r\n      refinedStones: prev.refinedStones + additionalCosts.refinedStones,\r\n      rawOres: prev.rawOres + additionalCosts.rawOres,\r\n      purplePowder: prev.purplePowder + additionalCosts.purplePowder,\r\n      yellowPowder: prev.yellowPowder + additionalCosts.yellowPowder,\r\n      consumedWeapons:\r\n        resultMessage.includes(\"리셋 방지됨\") &&\r\n        selectedWeaponData[\"등급\"] === \"필멸\"\r\n          ? {\r\n              ...(prev.consumedWeapons || {}),\r\n              [selectedWeaponName]:\r\n                ((prev.consumedWeapons &&\r\n                  prev.consumedWeapons[selectedWeaponName]) ||\r\n                  0) + 1,\r\n            }\r\n          : prev.consumedWeapons,\r\n    }));\r\n\r\n    setSnackbarInfo({ open: true, message: resultMessage });\r\n  };\r\n\r\n  const handleSkipToLevel = (targetLevel) => {\r\n    // 건너뛰기 시에는 재화를 누적하지 않고 레벨만 변경합니다.\r\n    setCurrentLevel(targetLevel);\r\n\r\n    handleSkipMenuClose();\r\n  };\r\n\r\n  const handleResetCosts = () => {\r\n    setTotalCosts(initialTotalCosts);\r\n    setCurrentLevel(0);\r\n    setSnackbarInfo({ open: true, message: \"누적 재화가 초기화되었습니다.\" });\r\n  };\r\n\r\n  const handleSnackbarClose = (event, reason) => {\r\n    if (reason === \"clickaway\") return;\r\n    setSnackbarInfo({ ...snackbarInfo, open: false });\r\n  };\r\n\r\n  if (loading) return <CircularProgress />;\r\n  if (error) return <Typography color=\"error\">오류: {error}</Typography>;\r\n\r\n  return (\r\n    <Box sx={{ mb: 2 }}>\r\n      <Button variant=\"contained\" onClick={handleOpenModal} fullWidth>\r\n        {selectedWeaponName || \"무기 선택\"}\r\n      </Button>\r\n\r\n      <Modal open={isModalOpen} onClose={handleCloseModal}>\r\n        <Box sx={styles.modalStyle}>\r\n          <Typography variant=\"h6\" component=\"h2\" sx={{ mb: 2 }}>\r\n            무기 선택\r\n          </Typography>\r\n          <Box sx={styles.modalGrid}>\r\n            {uniqueWeaponNames.map((name) => {\r\n              const weapon = getBaseWeaponData(name);\r\n              if (!weapon) return null;\r\n              return (\r\n                <Card key={name} sx={styles.modalWeaponCard(weapon[\"등급\"])}>\r\n                  <CardActionArea onClick={() => handleWeaponSelect(name)}>\r\n                    <CardMedia\r\n                      component=\"img\"\r\n                      sx={styles.modalWeaponImage}\r\n                      image={weaponImages[`${weapon[\"이미지 파일\"]}.webp`]}\r\n                      alt={name}\r\n                    />\r\n                    <CardContent sx={{ p: 0 }}>\r\n                      <Typography sx={styles.modalWeaponName}>\r\n                        {name}\r\n                      </Typography>\r\n                    </CardContent>\r\n                  </CardActionArea>\r\n                </Card>\r\n              );\r\n            })}\r\n          </Box>\r\n        </Box>\r\n      </Modal>\r\n\r\n      {selectedWeaponData && (\r\n        <Paper elevation={3} sx={{ ...styles.selectedWeaponPaper, mt: 2 }}>\r\n          <Box\r\n            component=\"img\"\r\n            src={weaponImages[`${selectedWeaponData[\"이미지 파일\"]}.webp`]}\r\n            alt={selectedWeaponData[\"이름\"]}\r\n            sx={styles.weaponImage}\r\n          />\r\n          <Box\r\n            sx={{\r\n              flex: 1,\r\n              minWidth: 0,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" sx={styles.weaponName} noWrap>\r\n              {selectedWeaponData[\"이름\"]}\r\n            </Typography>\r\n            <Typography\r\n              variant=\"caption\"\r\n              color=\"text.secondary\"\r\n              sx={{ mt: 0.5 }}\r\n            >\r\n              등급: {selectedWeaponData[\"등급\"]}\r\n            </Typography>\r\n            <Box sx={{ display: \"flex\", alignItems: \"center\", mt: \"auto\" }}>\r\n              <Typography variant=\"h6\">+{currentLevel} 강화</Typography>\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onClick={handleSkipMenuOpen}\r\n                endIcon={<ArrowForwardIosIcon />}\r\n                sx={{ flexShrink: 0, ml: \"auto\" }}\r\n              >\r\n                건너뛰기\r\n              </Button>\r\n              <Menu\r\n                anchorEl={skipMenuAnchorEl}\r\n                open={Boolean(skipMenuAnchorEl)}\r\n                onClose={handleSkipMenuClose}\r\n                anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n              >\r\n                {availableEnhancementLevels.map((level) => (\r\n                  <MenuItem\r\n                    key={level}\r\n                    onClick={() => handleSkipToLevel(level)}\r\n                  >\r\n                    +{level} 강화\r\n                  </MenuItem>\r\n                ))}\r\n              </Menu>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      )}\r\n\r\n      {selectedWeaponData && (\r\n        <Paper elevation={3} sx={{ p: 2, mt: 2 }}>\r\n          <Box sx={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 2 }}>\r\n            {/* 확정 강화 */}\r\n            <Box sx={{ textAlign: \"center\" }}>\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                확정 강화\r\n              </Typography>\r\n              {guaranteedEnhCost ? (\r\n                <>\r\n                  <Typography variant=\"body2\">\r\n                    골드: {Number(guaranteedEnhCost[\"골드\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    무형의 파편:{\" \"}\r\n                    {Number(guaranteedEnhCost[\"무형의 파편\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    sx={{ mt: 1 }}\r\n                    onClick={handleGuaranteedEnhance}\r\n                  >\r\n                    강화\r\n                  </Button>\r\n                </>\r\n              ) : (\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  정보 없음\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n\r\n            {/* 확률 강화 */}\r\n            <Box sx={{ textAlign: \"center\" }}>\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                확률 강화\r\n              </Typography>\r\n              {probEnhCost ? (\r\n                <>\r\n                  <Typography variant=\"body2\">\r\n                    골드: {Number(probEnhCost[\"골드\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    정교한 강화석:{\" \"}\r\n                    {Number(probEnhCost[\"정교한 강화석\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    미가공 강화 원석:{\" \"}\r\n                    {Number(probEnhCost[\"미가공 강화 원석\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Box\r\n                    sx={{\r\n                      mt: 1,\r\n                      display: \"flex\",\r\n                      justifyContent: \"center\",\r\n                      gap: 1,\r\n                      flexWrap: \"wrap\",\r\n                    }}\r\n                  >\r\n                    {displayProbabilities?.success > 0 && (\r\n                      <Typography variant=\"caption\">\r\n                        성공: {(displayProbabilities.success * 100).toFixed(1)}%\r\n                      </Typography>\r\n                    )}\r\n                    {displayProbabilities?.maintain > 0 && (\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        실패: {(displayProbabilities.maintain * 100).toFixed(1)}\r\n                        %\r\n                      </Typography>\r\n                    )}\r\n                    {displayProbabilities?.fall > 0 && (\r\n                      <Typography variant=\"caption\" color=\"error\">\r\n                        하락: {(displayProbabilities.fall * 100).toFixed(1)}%\r\n                      </Typography>\r\n                    )}\r\n                    {displayProbabilities?.reset > 0 && (\r\n                      <Typography variant=\"caption\" color=\"error\">\r\n                        리셋: {(displayProbabilities.reset * 100).toFixed(1)}%\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    sx={{ mt: 1 }}\r\n                    onClick={handleProbEnhance}\r\n                  >\r\n                    강화\r\n                  </Button>\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      alignItems: \"center\",\r\n                      mt: 1,\r\n                      gap: 1,\r\n                    }}\r\n                  >\r\n                    {parseFloat(probEnhCost[\"하락 확률\"]) > 0 && (\r\n                      <Box>\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Switch\r\n                              checked={isFallPreventionOn}\r\n                              onChange={(e) =>\r\n                                setIsFallPreventionOn(e.target.checked)\r\n                              }\r\n                              size=\"small\"\r\n                            />\r\n                          }\r\n                          label=\"하락 방지\"\r\n                        />\r\n                        <Typography variant=\"caption\" display=\"block\">\r\n                          비용:{\" \"}\r\n                          {Number(\r\n                            probEnhCost[\"하락 방지 비용\"]\r\n                          ).toLocaleString()}{\" \"}\r\n                          골드\r\n                        </Typography>\r\n                      </Box>\r\n                    )}\r\n                    {parseFloat(probEnhCost[\"리셋 확률\"]) > 0 && (\r\n                      <Box>\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Switch\r\n                              checked={isResetPreventionOn}\r\n                              onChange={(e) =>\r\n                                setIsResetPreventionOn(e.target.checked)\r\n                              }\r\n                              size=\"small\"\r\n                            />\r\n                          }\r\n                          label=\"리셋 방지\"\r\n                        />\r\n                        <Typography variant=\"caption\" display=\"block\">\r\n                          비용:{\" \"}\r\n                          {Number(\r\n                            probEnhCost[\"리셋 방지 비용\"]\r\n                          ).toLocaleString()}{\" \"}\r\n                          골드 +{\" \"}\r\n                          {(() => {\r\n                            const grade = selectedWeaponData[\"등급\"];\r\n                            const level = currentLevel; // 현재 레벨 기준\r\n                            if (grade === \"필멸\") return \"동일 무기 1개\";\r\n                            if (grade === \"영웅\") {\r\n                              const cost =\r\n                                level >= 7 && level <= 9\r\n                                  ? 1\r\n                                  : level >= 10 && level <= 12\r\n                                  ? 2\r\n                                  : 3;\r\n                              return `보라색 가루 ${cost}개`;\r\n                            }\r\n                            if (grade === \"전설\") {\r\n                              const cost =\r\n                                level >= 7 && level <= 9\r\n                                  ? 1\r\n                                  : level >= 10 && level <= 12\r\n                                  ? 2\r\n                                  : 3;\r\n                              return `노란색 가루 ${cost}개`;\r\n                            }\r\n                          })()}\r\n                        </Typography>\r\n                      </Box>\r\n                    )}\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  정보 없음\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      )}\r\n\r\n      {selectedWeaponData &&\r\n        (totalCosts.gold > 0 ||\r\n          totalCosts.formlessShards > 0 ||\r\n          totalCosts.refinedStones > 0 ||\r\n          totalCosts.rawOres > 0 ||\r\n          totalCosts.purplePowder > 0 ||\r\n          totalCosts.yellowPowder > 0 ||\r\n          (totalCosts.consumedWeapons &&\r\n            Object.keys(totalCosts.consumedWeapons).length > 0)) && (\r\n          <Paper elevation={3} sx={{ p: 2, mt: 2, position: \"relative\" }}>\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                mb: 1,\r\n              }}\r\n            >\r\n              <Typography variant=\"h6\">누적 소모 재화</Typography>\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onClick={handleResetCosts}\r\n              >\r\n                초기화\r\n              </Button>\r\n            </Box>\r\n            <Typography>골드: {totalCosts.gold.toLocaleString()}</Typography>\r\n            <Typography>\r\n              무형의 파편: {totalCosts.formlessShards.toLocaleString()}\r\n            </Typography>\r\n            <Typography>\r\n              정교한 강화석: {totalCosts.refinedStones.toLocaleString()}\r\n            </Typography>\r\n            <Typography>\r\n              미가공 강화 원석: {totalCosts.rawOres.toLocaleString()}\r\n            </Typography>\r\n            {totalCosts.purplePowder > 0 && (\r\n              <Typography>\r\n                보라색 가루: {totalCosts.purplePowder.toLocaleString()}\r\n              </Typography>\r\n            )}\r\n            {totalCosts.yellowPowder > 0 && (\r\n              <Typography>\r\n                노란색 가루: {totalCosts.yellowPowder.toLocaleString()}\r\n              </Typography>\r\n            )}\r\n            {totalCosts.consumedWeapons &&\r\n              Object.entries(totalCosts.consumedWeapons).map(\r\n                ([name, count]) => (\r\n                  <Typography key={name}>\r\n                    소모된 {name}: {count.toLocaleString()}개\r\n                  </Typography>\r\n                )\r\n              )}\r\n          </Paper>\r\n        )}\r\n\r\n      <Snackbar\r\n        open={snackbarInfo.open}\r\n        autoHideDuration={3000}\r\n        onClose={handleSnackbarClose}\r\n        message={snackbarInfo.message}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, {\r\n  useState,\r\n  useMemo,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Paper,\r\n  TableContainer,\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  CircularProgress,\r\n  Alert,\r\n} from \"@mui/material\";\r\nimport Papa from \"papaparse\";\r\nimport { CacheContext } from \"../../../contexts/CacheContext\";\r\n\r\nconst BASE_URL_ID = \"1IZra9ZZRwBBgT4ai1W0fCATeFFsztHnF0k03DmLr1tI\";\r\nconst GID = \"882618671\"; // 클래스 무기 강화 데이터 시트 GID\r\nconst SHEET_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${GID}`;\r\n\r\nexport default function ClassWeapon() {\r\n  const { cache, setCacheValue } = useContext(CacheContext);\r\n  const [data, setData] = useState(cache.classWeaponEnh || null);\r\n  const [loading, setLoading] = useState(!cache.classWeaponEnh);\r\n  const [fetchError, setFetchError] = useState(null);\r\n\r\n  const [currentAdvTier, setCurrentAdvTier] = useState(\"\");\r\n  const [currentEnhanceLevel, setCurrentEnhanceLevel] = useState(\"\");\r\n  const [targetAdvTier, setTargetAdvTier] = useState(\"\");\r\n  const [targetEnhanceLevel, setTargetEnhanceLevel] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (cache.classWeaponEnh) {\r\n        setData(cache.classWeaponEnh);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setFetchError(null);\r\n      try {\r\n        const response = await fetch(SHEET_URL);\r\n        if (!response.ok) {\r\n          throw new Error(\"데이터를 가져오는 데 실패했습니다.\");\r\n        }\r\n        const csvText = await response.text();\r\n\r\n        Papa.parse(csvText, {\r\n          header: true,\r\n          skipEmptyLines: true,\r\n          complete: (results) => {\r\n            const parsedData = results.data.filter(\r\n              (row) => row[\"전직 차수\"] && row[\"강화 차수\"]\r\n            );\r\n            setData(parsedData);\r\n            setCacheValue(\"classWeaponEnh\", parsedData);\r\n            setLoading(false);\r\n          },\r\n          error: (err) => {\r\n            throw new Error(err.message);\r\n          },\r\n        });\r\n      } catch (e) {\r\n        setFetchError(e.message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [cache.classWeaponEnh, setCacheValue]);\r\n\r\n  const advTiers = useMemo(() => {\r\n    if (!data) return [];\r\n    return [...new Set(data.map((item) => item[\"전직 차수\"]))].sort(\r\n      (a, b) => a - b\r\n    );\r\n  }, [data]);\r\n\r\n  const getEnhanceLevels = useCallback(\r\n    (tier) => {\r\n      if (!data || !tier) return [];\r\n      return data\r\n        .filter((item) => item[\"전직 차수\"] === tier)\r\n        .map((item) => item[\"강화 차수\"])\r\n        .sort((a, b) => a - b);\r\n    },\r\n    [data]\r\n  );\r\n\r\n  const currentEnhanceLevels = useMemo(\r\n    () => getEnhanceLevels(currentAdvTier),\r\n    [getEnhanceLevels, currentAdvTier]\r\n  );\r\n  const targetEnhanceLevels = useMemo(\r\n    () => getEnhanceLevels(targetAdvTier),\r\n    [getEnhanceLevels, targetAdvTier]\r\n  );\r\n\r\n  const { totalCost, error } = useMemo(() => {\r\n    if (\r\n      !data ||\r\n      currentAdvTier === \"\" ||\r\n      currentEnhanceLevel === \"\" ||\r\n      targetAdvTier === \"\" ||\r\n      targetEnhanceLevel === \"\"\r\n    ) {\r\n      return { totalCost: null, error: null };\r\n    }\r\n\r\n    if (\r\n      parseInt(currentAdvTier, 10) > parseInt(targetAdvTier, 10) ||\r\n      (parseInt(currentAdvTier, 10) === parseInt(targetAdvTier, 10) &&\r\n        parseInt(currentEnhanceLevel, 10) >= parseInt(targetEnhanceLevel, 10))\r\n    ) {\r\n      return {\r\n        totalCost: null,\r\n        error: \"목표 단계는 현재 단계보다 높아야 합니다.\",\r\n      };\r\n    }\r\n\r\n    const resources = [\r\n      \"골드\",\r\n      \"무형의 파편\",\r\n      \"강화 재료 1\",\r\n      \"강화 재료 2\",\r\n      \"강화 재료 3\",\r\n    ];\r\n    const total = {\r\n      골드: 0,\r\n      \"무형의 파편\": 0,\r\n    };\r\n\r\n    const startIndex = data.findIndex(\r\n      (d) =>\r\n        d[\"전직 차수\"] === currentAdvTier &&\r\n        d[\"강화 차수\"] === currentEnhanceLevel\r\n    );\r\n    const endIndex = data.findIndex(\r\n      (d) =>\r\n        d[\"전직 차수\"] === targetAdvTier &&\r\n        d[\"강화 차수\"] === targetEnhanceLevel\r\n    );\r\n\r\n    // 현재 단계의 다음 단계부터 목표 단계까지의 비용을 합산합니다.\r\n    for (let i = startIndex + 1; i <= endIndex; i++) {\r\n      resources.forEach((res) => {\r\n        const value = data[i][res];\r\n        if (value) {\r\n          if (res.startsWith(\"강화 재료\")) {\r\n            const match = value.match(/([^\\d]+)\\s*(\\d+)/);\r\n            if (match) {\r\n              const [, name, amount] = match;\r\n              total[name.trim()] =\r\n                (total[name.trim()] || 0) + parseInt(amount, 10);\r\n            }\r\n          } else {\r\n            total[res] = (total[res] || 0) + parseInt(value, 10);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    return { totalCost: total, error: null };\r\n  }, [\r\n    data,\r\n    currentAdvTier,\r\n    currentEnhanceLevel,\r\n    targetAdvTier,\r\n    targetEnhanceLevel,\r\n  ]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ display: \"flex\", justifyContent: \"center\", p: 3 }}>\r\n        <CircularProgress />\r\n        <Typography sx={{ ml: 2 }}>강화 비용 정보를 불러오는 중...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (fetchError) {\r\n    return <Alert severity=\"error\">{fetchError}</Alert>;\r\n  }\r\n\r\n  const renderSelector = (label, value, handler, options) => (\r\n    <FormControl fullWidth sx={{ mb: 2 }}>\r\n      <InputLabel>{label}</InputLabel>\r\n      <Select\r\n        value={value}\r\n        label={label}\r\n        onChange={(e) => handler(e.target.value)}\r\n      >\r\n        {options.map((opt) => (\r\n          <MenuItem key={opt} value={opt}>\r\n            {opt}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n    </FormControl>\r\n  );\r\n\r\n  return (\r\n    <Box sx={{ p: 2 }}>\r\n      {/* <Typography variant=\"h5\" gutterBottom>\r\n        클래스 무기 강화 시뮬레이터\r\n      </Typography> */}\r\n      <Paper sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"h6\">현재 단계</Typography>\r\n        {renderSelector(\r\n          \"전직 차수\",\r\n          currentAdvTier,\r\n          setCurrentAdvTier,\r\n          advTiers\r\n        )}\r\n        {renderSelector(\r\n          \"강화 레벨\",\r\n          currentEnhanceLevel,\r\n          setCurrentEnhanceLevel,\r\n          currentEnhanceLevels\r\n        )}\r\n      </Paper>\r\n      <Paper sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"h6\">목표 단계</Typography>\r\n        {renderSelector(\"전직 차수\", targetAdvTier, setTargetAdvTier, advTiers)}\r\n        {renderSelector(\r\n          \"강화 레벨\",\r\n          targetEnhanceLevel,\r\n          setTargetEnhanceLevel,\r\n          targetEnhanceLevels\r\n        )}\r\n      </Paper>\r\n\r\n      {error && <Alert severity=\"error\">{error}</Alert>}\r\n\r\n      {totalCost && !error && (\r\n        <TableContainer component={Paper}>\r\n          <Table size=\"small\">\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell\r\n                  colSpan={2}\r\n                  sx={{ fontWeight: \"bold\", textAlign: \"center\" }}\r\n                >\r\n                  필요 재료 총합\r\n                </TableCell>\r\n              </TableRow>\r\n              {Object.entries(totalCost).map(\r\n                ([key, value]) =>\r\n                  value > 0 && (\r\n                    <TableRow key={key}>\r\n                      <TableCell>{key}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {value.toLocaleString()}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Box, Typography, Container, AppBar, Tabs, Tab } from \"@mui/material\";\r\nimport SpecialWeapon from \"./SpecialWeapon\";\r\nimport ClassWeapon from \"./ClassWeapon\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`enh-sim-tabpanel-${index}`}\r\n      aria-labelledby={`enh-sim-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 3 }}>\r\n          <Typography component=\"div\">{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function EnhSim() {\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <Box sx={{ my: 2, textAlign: \"center\" }}>\r\n          <Typography variant=\"h5\" component=\"h1\" gutterBottom>\r\n            강화 시뮬레이터\r\n          </Typography>\r\n        </Box>\r\n      </Container>\r\n      <Box sx={{ width: \"100%\" }}>\r\n        <AppBar position=\"static\">\r\n          <Tabs value={value} onChange={handleChange} variant=\"fullWidth\">\r\n            <Tab label=\"특수 무기\" />\r\n            <Tab label=\"클래스 무기\" />\r\n          </Tabs>\r\n        </AppBar>\r\n        <TabPanel value={value} index={0}>\r\n          <SpecialWeapon />\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1}>\r\n          <ClassWeapon />\r\n        </TabPanel>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","getCardColorByGrade","grade","selectedWeaponPaper","p","display","alignItems","gap","weaponImage","width","height","objectFit","backgroundColor","borderRadius","weaponName","fontWeight","modalStyle","position","top","left","transform","maxWidth","bgcolor","border","boxShadow","maxHeight","overflowY","modalGrid","gridTemplateColumns","modalWeaponCard","textAlign","color","flexDirection","justifyContent","modalWeaponImage","modalWeaponName","fontSize","BASE_URL_ID","WEAPONS_SHEET_URL","concat","GUARANTEED_ENH_URL","PROB_ENH_URL","images","require","weaponImages","reduce","acc","item","replace","SIM_STATE_CACHE_KEY","SpecialWeapon","cache","setCacheValue","useContext","CacheContext","weapons","setWeapons","useState","guaranteedEnhCosts","setGuaranteedEnhCosts","probEnhCosts","setProbEnhCosts","loading","setLoading","error","setError","isModalOpen","setIsModalOpen","initialTotalCosts","gold","formlessShards","refinedStones","rawOres","purplePowder","yellowPowder","consumedWeapons","selectedWeaponName","setSelectedWeaponName","savedStateJSON","sessionStorage","getItem","JSON","parse","console","currentLevel","setCurrentLevel","totalCosts","setTotalCosts","savedState","skipMenuAnchorEl","setSkipMenuAnchorEl","isFallPreventionOn","setIsFallPreventionOn","isResetPreventionOn","setIsResetPreventionOn","snackbarInfo","setSnackbarInfo","open","message","getBaseWeaponData","useCallback","name","find","w","parseInt","uniqueWeaponNames","useMemo","excludedNames","Set","excludedGrades","nameCounts","Array","from","filter","has","weapon","useEffect","length","includes","stateToSave","setItem","stringify","async","fetchAndParse","url","cacheKey","response","fetch","ok","csvText","text","Promise","reject","Papa","header","skipEmptyLines","complete","results","data","row","values","some","val","trim","err","weaponsData","guaranteedData","probData","all","fetchData","selectedWeaponData","availableEnhancementLevels","level","isNaN","sort","a","b","handleSkipMenuClose","handleCloseModal","guaranteedEnhCost","nextLevel","cost","probEnhCost","displayProbabilities","success","parseFloat","maintain","fall","reset","reducedSuccess","nextProbEnhCost","_jsx","CircularProgress","_jsxs","Typography","children","Box","sx","mb","Button","variant","onClick","handleOpenModal","fullWidth","Modal","onClose","styles","component","Card","CardActionArea","handleWeaponSelect","CardMedia","image","alt","CardContent","Paper","elevation","_objectSpread","mt","src","flex","minWidth","noWrap","size","event","currentTarget","endIcon","ArrowForwardIosIcon","flexShrink","ml","Menu","anchorEl","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","gutterBottom","_Fragment","Number","toLocaleString","handleGuaranteedEnhance","goldCost","shardCost","prev","flexWrap","toFixed","handleProbEnhance","refinedStoneCost","rawOreCost","successRate","fallRate","resetRate","rand","Math","random","resultMessage","additionalCosts","max","weaponGrade","additionalResultMessage","powderCost","FormControlLabel","control","Switch","checked","onChange","target","label","handleResetCosts","entries","_ref","count","Snackbar","autoHideDuration","handleSnackbarClose","reason","SHEET_URL","ClassWeapon","setData","classWeaponEnh","fetchError","setFetchError","currentAdvTier","setCurrentAdvTier","currentEnhanceLevel","setCurrentEnhanceLevel","targetAdvTier","setTargetAdvTier","targetEnhanceLevel","setTargetEnhanceLevel","parsedData","advTiers","getEnhanceLevels","tier","currentEnhanceLevels","targetEnhanceLevels","totalCost","resources","total","골드","startIndex","findIndex","d","endIndex","i","forEach","res","value","startsWith","match","amount","Alert","severity","renderSelector","handler","options","FormControl","InputLabel","Select","opt","TableContainer","Table","TableBody","TableRow","TableCell","colSpan","key","align","TabPanel","props","index","other","_objectWithoutProperties","_excluded","role","hidden","EnhSim","setValue","Container","my","AppBar","Tabs","handleChange","newValue","Tab"],"sourceRoot":""}