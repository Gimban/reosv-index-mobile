{"version":3,"file":"static/js/74.1729d49f.chunk.js","mappings":"6tGAEO,MAAMA,EAAa,CACxBC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,MAAO,MACPC,SAAU,IACVC,QAAS,mBACTC,OAAQ,iBACRC,UAAW,GACXC,EAAG,EACHC,UAAW,OACXC,UAAW,QAGAC,EAAY,CACvBC,QAAS,OACTC,oBAAqB,iBACrBC,IAAK,GAcMC,EAAmB,CAC9BZ,MAAO,OACPa,OAAQ,GACRC,UAAW,UACXC,gBAAiB,sBAGNC,EAAkB,CAC7BC,SAAU,UACVZ,EAAG,G,aC9BL,MAAMa,EAASC,EAAAA,MAKTC,EAAeF,EAAOG,OAAOC,OAAO,CAACC,EAAKC,KAE9CD,EADYC,EAAKC,QAAQ,KAAM,KACpBP,EAAOM,GACXD,GACN,CAAC,GA6EJ,EA3E6BG,IAOtB,IAPuB,KAC5BC,EAAI,QACJC,EAAO,eACPC,EAAc,YACdC,EAAW,cACXC,EAAgB,IAAIC,IAAK,eACzBC,EAAiB,IAAID,KACtBN,EACC,MAAMQ,GAAoBC,EAAAA,EAAAA,aACvBC,GAEGN,EAAYO,KACTC,GAAMA,EAAE,kBAAUF,GAAqC,IAA7BG,SAASD,EAAE,6BAAU,MAC7CR,EAAYO,KAAMC,GAAMA,EAAE,kBAAUF,GAG7C,CAACN,IAGGU,GAAoBC,EAAAA,EAAAA,SAAQ,KAChC,IAAKX,EAAa,MAAO,GAEzB,MAAMY,EAAaZ,EAAYR,OAAO,CAACC,EAAKe,KAC1C,MAAMF,EAAOE,EAAE,gBAIf,OAHIF,IACFb,EAAIa,IAASb,EAAIa,IAAS,GAAK,GAE1Bb,GACN,CAAC,GAMJ,OAJuBoB,MAAMC,KAC3B,IAAIZ,IAAIF,EAAYe,IAAKP,GAAMA,EAAE,mBAGbQ,OAAQV,IAC5B,IAAKA,GAAQM,EAAWN,IAAS,GAAKL,EAAcgB,IAAIX,GACtD,OAAO,EAET,MAAMY,EAASd,EAAkBE,GACjC,OAAOY,IAAWf,EAAec,IAAIC,EAAO,oBAE7C,CAAClB,EAAaC,EAAeE,EAAgBC,IAEhD,OACEe,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CAACvB,KAAMA,EAAMC,QAASA,EAAQuB,UAClCC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAIC,EAAkBJ,SAAA,EACzBF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,KAAKC,UAAU,KAAKJ,GAAI,CAAEK,GAAI,GAAIR,SAAC,+BAGvDF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAACC,GAAIC,EAAiBJ,SACvBX,EAAkBK,IAAKT,IACtB,MAAMY,EAASd,EAAkBE,GACjC,OAAKY,GAEHC,EAAAA,EAAAA,KAACW,EAAAA,EAAI,CAAYN,IDvDCO,ECuD0Bb,EAAO,gBDvD5B,CACnC7C,OAAQ,iBACR2D,UAAW,SACX/C,iBAAiBgD,EAAAA,EAAAA,GAAoBF,GACrCG,MAAO,QACPnD,OAAQ,OACRJ,QAAS,OACTwD,cAAe,SACfC,eAAgB,kBC+CsDf,UACxDC,EAAAA,EAAAA,MAACe,EAAAA,EAAc,CAACC,QAASA,IAAMvC,EAAeO,GAAMe,SAAA,EAClDF,EAAAA,EAAAA,KAACoB,EAAAA,EAAS,CACRX,UAAU,MACVJ,GAAIC,EACJe,MAAOlD,EAAa,GAADmD,OAAIvB,EAAO,mCAAS,UACvCwB,IAAKpC,KAEPa,EAAAA,EAAAA,KAACwB,EAAAA,EAAW,CAACnB,GAAI,CAAEjD,EAAG,GAAI8C,UACxBF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACF,GAAIC,EAAuBJ,SAAEf,UATpCA,GAFO,KDrDAyB,e,41CEvBhC,IAAIhB,EAAM,CACT,qBAAsB,KACtB,yBAA0B,KAC1B,iBAAkB,KAClB,gBAAiB,KACjB,gBAAiB,KACjB,4BAA6B,KAC7B,0BAA2B,KAC3B,2BAA4B,KAC5B,uBAAwB,KACxB,eAAgB,KAChB,iBAAkB,KAClB,eAAgB,KAChB,sBAAuB,KACvB,0BAA2B,KAC3B,qBAAsB,KACtB,qBAAsB,KACtB,iBAAkB,KAClB,oBAAqB,KACrB,oBAAqB,KACrB,wBAAyB,KACzB,kBAAmB,KACnB,gBAAiB,KACjB,oBAAqB,KACrB,cAAe,KACf,kBAAmB,KACnB,kBAAmB,KACnB,mBAAoB,KACpB,eAAgB,IAChB,oBAAqB,KACrB,gBAAiB,KACjB,oBAAqB,KACrB,sBAAuB,KACvB,0BAA2B,KAC3B,mBAAoB,KACpB,0BAA2B,KAC3B,eAAgB,KAChB,sBAAuB,KACvB,0BAA2B,KAC3B,2BAA4B,GAC5B,eAAgB,KAChB,2BAA4B,KAC5B,eAAgB,KAChB,6BAA8B,KAC9B,wBAAyB,IACzB,uBAAwB,KACxB,gBAAiB,KACjB,mBAAoB,KACpB,sBAAuB,KACvB,mBAAoB,KACpB,iBAAkB,KAClB,mBAAoB,KACpB,oBAAqB,KACrB,sBAAuB,KACvB,gBAAiB,IACjB,iBAAkB,KAClB,oBAAqB,KACrB,oBAAqB,KACrB,kBAAmB,KACnB,sBAAuB,KACvB,sBAAuB,KACvB,yBAA0B,KAC1B,qBAAsB,KACtB,uBAAwB,KACxB,uBAAwB,KACxB,sBAAuB,IACvB,sBAAuB,KACvB,uBAAwB,KACxB,qBAAsB,EACtB,oBAAqB,KACrB,qBAAsB,KACtB,yBAA0B,KAC1B,oBAAqB,KACrB,sBAAuB,IACvB,sBAAuB,KACvB,mBAAoB,GACpB,kBAAmB,KACnB,2BAA4B,KAC5B,sBAAuB,IACvB,sBAAuB,KACvB,2BAA4B,KAC5B,yBAA0B,KAC1B,0BAA2B,KAC3B,kBAAmB,KACnB,oBAAqB,KACrB,sBAAuB,KACvB,sBAAuB,KACvB,gBAAiB,MAIlB,SAAS6B,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElC,EAAK8B,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOnC,EAAI8B,EACZ,CACAD,EAAerD,KAAO,WACrB,OAAO8D,OAAO9D,KAAKwB,EACpB,EACA6B,EAAeU,QAAUP,EACzBQ,EAAOC,QAAUZ,EACjBA,EAAeE,GAAK,I,kwFC5Gb,MAAMb,EAAuBF,IAClC,OAAQA,GACN,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UACT,IAAK,eACH,MAAO,UAET,QACE,MAAO,W,mvBCpBN,MAAM0B,EAAsB,CACjClF,EAAG,EACHI,QAAS,OACT+E,WAAY,SACZ7E,IAAK,GAGM8E,EAAc,CACzBzF,MAAO,GACPa,OAAQ,GACRC,UAAW,UACXC,gBAAiB,mBACjB2E,aAAc,GAGHC,EAAa,CACxBC,WAAY,Q,aCId,MAAMC,EAAc,+CAKdC,EAAiB,0CAAAvB,OAA6CsB,EAAW,2BAAAtB,OAJ3D,KAKdwB,EAAkB,0CAAAxB,OAA6CsB,EAAW,2BAAAtB,OAJrD,cAKrByB,EAAY,0CAAAzB,OAA6CsB,EAAW,2BAAAtB,OAJrD,aAOfrD,EAASC,EAAAA,MAMTC,EAAeF,EAAOG,OAAOC,OAAO,CAACC,EAAKC,KAE9CD,EADYC,EAAKC,QAAQ,KAAM,KACpBP,EAAOM,GACXD,GACN,CAAC,GAEE0E,EAAsB,2BAGtBlE,EAAgB,IAAIC,IAAI,CAC5B,yCACA,4BACA,2BACA,kCACA,qBACA,2BACA,kCACA,kCACA,oCAIIC,EAAiB,IAAID,IAAI,CAAC,eAAM,eAAM,iBAE7B,SAASkE,IACtB,MAAM,MAAEC,EAAK,cAAEC,IAAkBC,EAAAA,EAAAA,YAAWC,EAAAA,IACpCC,QAASC,GAAmBL,GAC7BM,EAAoBC,IAAyBC,EAAAA,EAAAA,UAAS,KACtDC,EAAcC,IAAmBF,EAAAA,EAAAA,UAAS,KAC1CG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,IAChCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,OAC5BO,EAAaC,IAAkBR,EAAAA,EAAAA,WAAS,GAEzCS,EAAoB,CACxBC,KAAM,EACNC,eAAgB,EAChBC,cAAe,EACfC,QAAS,EACTC,aAAc,EACdC,aAAc,EACdC,gBAAiB,CAAC,IAIbC,EAAoBC,IAAyBlB,EAAAA,EAAAA,UAAS,KAC3D,IACE,MAAMmB,EAAiBC,eAAeC,QAAQ/B,GAC9C,GAAI6B,EAAgB,CAElB,OADmBG,KAAKC,MAAMJ,GACZF,oBAAsB,EAC1C,CACF,CAAE,MAAOZ,GACPmB,QAAQnB,MACN,yDACAA,EAEJ,CACA,MAAO,MAGFoB,EAAcC,IAAmB1B,EAAAA,EAAAA,UAAS,KAC/C,IACE,MAAMmB,EAAiBC,eAAeC,QAAQ/B,GAC9C,GAAI6B,EAAgB,CAElB,OADmBG,KAAKC,MAAMJ,GACZM,cAAgB,CACpC,CACF,CAAE,MAAOpB,GACPmB,QAAQnB,MAAM,mDAAoDA,EACpE,CACA,OAAO,KAGFsB,EAAYC,IAAiB5B,EAAAA,EAAAA,UAAS,KAC3C,IACE,MAAMmB,EAAiBC,eAAeC,QAAQ/B,GAC9C,GAAI6B,EAAgB,CAClB,MAAMU,EAAaP,KAAKC,MAAMJ,GAC9B,GAAIU,EAAWF,WAQb,MALmD,kBAA1CE,EAAWF,WAAWX,iBACa,OAA1Ca,EAAWF,WAAWX,kBAEtBa,EAAWF,WAAWX,gBAAkB,CAAC,GAEpCa,EAAWF,UAEtB,CACF,CAAE,MAAOtB,GACPmB,QAAQnB,MAAM,iDAAkDA,EAClE,CAEA,OAAOI,KAGFqB,EAAkBC,IAAuB/B,EAAAA,EAAAA,UAAS,OAClDgC,EAAoBC,IAAyBjC,EAAAA,EAAAA,WAAS,IACtDkC,EAAqBC,IAA0BnC,EAAAA,EAAAA,WAAS,IACxDoC,EAAcC,KAAmBrC,EAAAA,EAAAA,UAAS,CAC/ChF,MAAM,EACNsH,QAAS,MAIXC,EAAAA,EAAAA,WAAU,KACR,IAAK1C,IAAmBoB,EAAoB,OAE5C,MAAMlF,EAAa8D,EAAelF,OAAO,CAACC,EAAKe,KAC7C,MAAMF,EAAOE,EAAE,gBAIf,OAHIF,IACFb,EAAIa,IAASb,EAAIa,IAAS,GAAK,GAE1Bb,GACN,CAAC,GAYEyB,GARqBZ,EAQMwF,EAN7BpB,EAAenE,KACZC,GAAMA,EAAE,kBAAUF,GAAqC,IAA7BG,SAASD,EAAE,6BAAU,MAC7CkE,EAAenE,KAAMC,GAAMA,EAAE,kBAAUF,IAJrBA,MAWxBY,GAboBZ,IAASM,EAAWN,GAAQ,EAchD+G,CAAcvB,KACf7F,EAAcgB,IAAI6E,KAClB3F,EAAec,IAAIC,EAAO,kBAE1B6E,EAAsB,KAEvB,CAACrB,EAAgBoB,KAGpBsB,EAAAA,EAAAA,WAAU,KACR,MAAME,EAAc,CAAExB,qBAAoBQ,eAAcE,cACxDP,eAAesB,QAAQpD,EAAqBgC,KAAKqB,UAAUF,KAC1D,CAACxB,EAAoBQ,EAAcE,KAEtCY,EAAAA,EAAAA,WAAU,KA8CH1C,EAGHO,GAAW,GAhDKwC,WAChBxC,GAAW,GACXE,EAAS,MAET,MAAMuC,EAAgBD,MAAOE,EAAKC,KAChC,GAAIvD,EAAMuD,GACR,OAAOvD,EAAMuD,GAEf,MAAMC,QAAiBC,MAAMH,GAC7B,IAAKE,EAASE,GACZ,MAAM,IAAI5E,MAAM,IAADV,OAAKmF,EAAQ,qGAE9B,MAAMI,QAAgBH,EAASI,OAC/B,OAAO,IAAIC,QAAQ,CAAC5E,EAAS6E,KAC3BC,IAAAA,MAAWJ,EAAS,CAClBK,QAAQ,EACRC,gBAAgB,EAChBC,SAAWC,IACT,MAAMC,EAAOD,EAAQC,KAAKzH,OAAQ0H,GAChCrF,OAAOsF,OAAOD,GAAKE,KAAMC,GAAQA,GAAsB,KAAfA,EAAIC,SAE9CxE,EAAcsD,EAAUa,GACxBnF,EAAQmF,IAEVvD,MAAQ6D,GAAQZ,EAAO,IAAIhF,MAAM4F,EAAI5B,eAK3C,IACE,MAAO,CAAE6B,EAAgBC,SAAkBf,QAAQgB,IAAI,CACrDxB,EAAc1D,EAAmB,WACjC0D,EAAczD,EAAoB,sBAClCyD,EAAcxD,EAAc,kBAG9BU,EAAsBoE,GACtBjE,EAAgBkE,EAClB,CAAE,MAAO/F,GACPiC,EAASjC,EAAEiE,QACb,CAAC,QACClC,GAAW,EACb,GAIAkE,IAID,CAAC9E,EAAOC,EAAeI,IAE1B,MAAM0E,IAAqBzI,EAAAA,EAAAA,SAAQ,IAC5BmF,GAAuBpB,EAE1BA,EAAenE,KACZC,GACCA,EAAE,kBAAUsF,GAAmD,IAA7BrF,SAASD,EAAE,6BAAU,MACtDkE,EAAenE,KAAMC,GAAMA,EAAE,kBAAUsF,GALK,KAOlD,CAACpB,EAAgBoB,IAEduD,IAA6B1I,EAAAA,EAAAA,SAAQ,IACpCmF,GAAuBpB,EACrBA,EACJ1D,OAAQR,GAAMA,EAAE,kBAAUsF,GAC1B/E,IAAKP,GAAMC,SAASD,EAAE,6BAAU,KAChCQ,OAAQsI,IAAWC,MAAMD,IACzBE,KAAK,CAACC,EAAGC,IAAMD,EAAIC,GAL6B,GAMlD,CAAChF,EAAgBoB,IAKd6D,GAAsBA,IAAM/C,EAAoB,MAGhDgD,GAAmBA,IAAMvE,GAAe,GAExCwE,IAAoBlJ,EAAAA,EAAAA,SAAQ,KAChC,IAAKyI,GAAoB,OAAO,KAEhC,MAAMU,EAAYxD,EAAe,EACjC,OAAO3B,EAAmBpE,KACvBwJ,GACCA,EAAK,kBAAUX,GAAmB,iBAClC3I,SAASsJ,EAAK,6BAAU,MAAQD,IAEnC,CAACV,GAAoB9C,EAAc3B,IAEhCqF,IAAcrJ,EAAAA,EAAAA,SAAQ,KAC1B,IAAKyI,GAAoB,OAAO,KAEhC,MAAMU,EAAYxD,EAAe,EACjC,OAAOxB,EAAavE,KACjBwJ,GACCA,EAAK,kBAAUX,GAAmB,iBAClC3I,SAASsJ,EAAK,6BAAU,MAAQD,IAEnC,CAACV,GAAoB9C,EAAcxB,IAEhCmF,IAAuBtJ,EAAAA,EAAAA,SAAQ,KACnC,IAAKqJ,GAAa,OAAO,KAEzB,IAAIE,EAAUC,WAAWH,GAAY,+BAAa,EAC9CI,EAAWD,WAAWH,GAAY,+BAAa,EAC/CK,EAAOF,WAAWH,GAAY,+BAAa,EAC3CM,EAAQH,WAAWH,GAAY,+BAAa,EAEhD,GAAInD,EAAoB,CACtB,MAAM0D,EAAiBL,EAAU,EACjCE,GAAYG,EACZH,GAAYC,EACZH,EAAUK,EACVF,EAAO,CACT,CAEA,MAAO,CACLH,UACAE,WACAC,OACAC,UAED,CAACN,GAAanD,KASjBO,EAAAA,EAAAA,WAAU,KACRN,GAAsB,GACtBE,GAAuB,IACtB,CAAClB,KAGJsB,EAAAA,EAAAA,WAAU,KACR,MAAMoD,EAAkB1F,EAAavE,KAClCwJ,GACCA,EAAK,mBAA4B,OAAlBX,SAAkB,IAAlBA,QAAkB,EAAlBA,GAAqB,kBACpC3I,SAASsJ,EAAK,6BAAU,MAAQzD,EAAe,GAG7C6D,WAA0B,OAAfK,QAAe,IAAfA,OAAe,EAAfA,EAAkB,8BAAY,GAC7C1D,GAAsB,GAClBqD,WAA0B,OAAfK,QAAe,IAAfA,OAAe,EAAfA,EAAkB,8BAAY,GAC7CxD,GAAuB,IACxB,CAACV,EAAcxB,EAAcsE,KAyJhC,OAAIpE,GAAgB7D,EAAAA,EAAAA,KAACsJ,EAAAA,EAAgB,IACjCvF,GAAc5D,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACQ,MAAM,QAAOb,SAAA,CAAC,iBAAK6D,MAG/C5D,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEK,GAAI,GAAIR,SAAA,EACjBF,EAAAA,EAAAA,KAACuJ,EAAAA,EAAM,CAAC/I,QAAQ,YAAYW,QAvORqI,IAAMtF,GAAe,GAuOauF,WAAS,EAAAvJ,SAC5DyE,GAAsB,+BAGzB3E,EAAAA,EAAAA,KAAC0J,EAAAA,EAAoB,CACnBhL,KAAMuF,EACNtF,QAAS8J,GACT7J,eA7LsBO,IAC1ByF,EAAsBzF,GACtBiG,EAAgB,GAChBqD,MA2LI5J,YAAa0E,EACbzE,cAAeA,EACfE,eAAgBA,IAGjBiJ,KACC9H,EAAAA,EAAAA,MAACwJ,EAAAA,EAAK,CAACC,UAAW,EAAGvJ,IAAEwJ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOvJ,GAA0B,IAAEwJ,GAAI,IAAI5J,SAAA,EAChEF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CACFK,UAAU,MACVsJ,IAAK5L,EAAa,GAADmD,OAAI2G,GAAmB,mCAAS,UACjD1G,IAAK0G,GAAmB,gBACxB5H,GAAIC,KAENH,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CACFC,GAAI,CACF2J,KAAM,EACNC,SAAU,EACVzM,QAAS,OACTwD,cAAe,UACfd,SAAA,EAEFF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,KAAKH,GAAIC,EAAmB4J,QAAM,EAAAhK,SACnD+H,GAAmB,mBAEtB9H,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CACTC,QAAQ,UACRO,MAAM,iBACNV,GAAI,CAAEyJ,GAAI,IAAM5J,SAAA,CACjB,iBACM+H,GAAmB,oBAE1B9H,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE7C,QAAS,OAAQ+E,WAAY,SAAUuH,GAAI,QAAS5J,SAAA,EAC7DC,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,KAAIN,SAAA,CAAC,IAAEiF,EAAa,oBACxCnF,EAAAA,EAAAA,KAACuJ,EAAAA,EAAM,CACL/I,QAAQ,WACR2J,KAAK,QACLhJ,QAxRciJ,IAC1B3E,EAAoB2E,EAAMC,gBAwRdC,SAAStK,EAAAA,EAAAA,KAACuK,EAAAA,EAAmB,IAC7BlK,GAAI,CAAEmK,WAAY,EAAGC,GAAI,QAASvK,SACnC,8BAGDF,EAAAA,EAAAA,KAAC0K,EAAAA,EAAI,CACHC,SAAUnF,EACV9G,KAAMkM,QAAQpF,GACd7G,QAAS6J,GACTqC,aAAc,CAAEC,SAAU,SAAUC,WAAY,SAChDC,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,SAAU7K,SAEzDgI,GAA2BtI,IAAKuI,IAC/BhI,EAAAA,EAAAA,MAAC8K,EAAAA,EAAQ,CAEP9J,QAASA,KAjFzBiE,EAiFiD+C,QA/EjDK,MA+EwDtI,SAAA,CACzC,IACGiI,EAAM,kBAHHA,eAYlBF,KACCjI,EAAAA,EAAAA,KAAC2J,EAAAA,EAAK,CAACC,UAAW,EAAGvJ,GAAI,CAAEjD,EAAG,EAAG0M,GAAI,GAAI5J,UACvCC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE7C,QAAS,OAAQC,oBAAqB,UAAWC,IAAK,GAAIwC,SAAA,EAEnEC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEQ,UAAW,UAAWX,SAAA,EAC/BF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,YAAY0K,cAAY,EAAAhL,SAAC,8BAG5CwI,IACCvI,EAAAA,EAAAA,MAAAgL,EAAAA,SAAA,CAAAjL,SAAA,EACEC,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,QAAON,SAAA,CAAC,iBACrBkL,OAAO1C,GAAkB,iBAAO2C,qBAEvClL,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,QAAON,SAAA,CAAC,mCAClB,IACPkL,OAAO1C,GAAkB,oCAAW2C,qBAEvCrL,EAAAA,EAAAA,KAACuJ,EAAAA,EAAM,CACL/I,QAAQ,WACR2J,KAAK,QACL9J,GAAI,CAAEyJ,GAAI,GACV3I,QAxPcmK,KAC9B,IAAK5C,GAAmB,OAExB,MAAM6C,EAAWjM,SAASoJ,GAAkB,gBAAO,KAAO,EACpD8C,EAAYlM,SAASoJ,GAAkB,mCAAW,KAAO,EAE/DpD,EAAemG,IAAI5B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACd4B,GAAI,IACPrH,KAAMqH,EAAKrH,KAAOmH,EAClBlH,eAAgBoH,EAAKpH,eAAiBmH,KAIxCpG,EAAiBqG,GAASA,EAAO,IA2OgBvL,SAClC,qBAKHF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,QAAQO,MAAM,iBAAgBb,SAAC,kCAOvDC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEQ,UAAW,UAAWX,SAAA,EAC/BF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,YAAY0K,cAAY,EAAAhL,SAAC,8BAG5C2I,IACC1I,EAAAA,EAAAA,MAAAgL,EAAAA,SAAA,CAAAjL,SAAA,EACEC,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,QAAON,SAAA,CAAC,iBACrBkL,OAAOvC,GAAY,iBAAOwC,qBAEjClL,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,QAAON,SAAA,CAAC,yCACjB,IACRkL,OAAOvC,GAAY,0CAAYwC,qBAElClL,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,QAAON,SAAA,CAAC,gDACf,IACVkL,OAAOvC,GAAY,iDAAcwC,qBAEpClL,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CACFC,GAAI,CACFyJ,GAAI,EACJtM,QAAS,OACTyD,eAAgB,SAChBvD,IAAK,EACLgO,SAAU,QACVxL,SAAA,EAEmB,OAApB4I,SAAoB,IAApBA,QAAoB,EAApBA,GAAsBC,SAAU,IAC/B5I,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,UAASN,SAAA,CAAC,kBACS,IAA/B4I,GAAqBC,SAAe4C,QAAQ,GAAG,QAGpC,OAApB7C,SAAoB,IAApBA,QAAoB,EAApBA,GAAsBG,UAAW,IAChC9I,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,UAAUO,MAAM,iBAAgBb,SAAA,CAAC,kBACb,IAAhC4I,GAAqBG,UAAgB0C,QAAQ,GAAG,QAIrC,OAApB7C,SAAoB,IAApBA,QAAoB,EAApBA,GAAsBI,MAAO,IAC5B/I,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,UAAUO,MAAM,QAAOb,SAAA,CAAC,kBACR,IAA5B4I,GAAqBI,MAAYyC,QAAQ,GAAG,QAGjC,OAApB7C,SAAoB,IAApBA,QAAoB,EAApBA,GAAsBK,OAAQ,IAC7BhJ,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,UAAUO,MAAM,QAAOb,SAAA,CAAC,kBACP,IAA7B4I,GAAqBK,OAAawC,QAAQ,GAAG,WAKzD3L,EAAAA,EAAAA,KAACuJ,EAAAA,EAAM,CACL/I,QAAQ,WACR2J,KAAK,QACL9J,GAAI,CAAEyJ,GAAI,GACV3I,QA1SQyK,KACxB,IAAK/C,GAAa,OAElB,IAAI0C,EAAWjM,SAASuJ,GAAY,gBAAO,KAAO,EAClD,MAAMgD,EAAmBvM,SAASuJ,GAAY,yCAAY,KAAO,EAC3DiD,EAAaxM,SAASuJ,GAAY,gDAAc,KAAO,EAE7D,IAAIkD,EAAc/C,WAAWH,GAAY,+BAAa,EAClDmD,EAAWhD,WAAWH,GAAY,+BAAa,EACnD,MAAMoD,EAAYjD,WAAWH,GAAY,+BAAa,EAItD,GAAInD,EAAoB,CACtB6F,GAAYjM,SAASuJ,GAAY,0CAAa,KAAO,EAKrDkD,EAH2BA,EAAc,EAIzCC,EAAW,CACb,CACIpG,IACF2F,GAAYjM,SAASuJ,GAAY,0CAAa,KAAO,GAIvD,MAOMqD,EAAOC,KAAKC,SAClB,IAAIC,EAAgB,GAChBC,EAAkB,CACpBlI,KAAMmH,EACNjH,cAAeuH,EACftH,QAASuH,EACTtH,aAAc,EACdC,aAAc,GAGhB,GAAIyH,EAAOH,EAET3G,EAAiBqG,GAASA,EAAO,GACjCY,EAAa,gCAAA/K,OAAe6D,EAAe,EAAC,UACvC,GAAI+G,EAAOH,EAAcC,EAGzBtG,EAMH2G,EAAgB,gEALhBjH,EAAiBqG,GAASU,KAAKI,IAAI,EAAGd,EAAO,IAC7CY,EAAa,iCAAA/K,OACX6D,EAAe,EAAC,IAAA7D,OAAO6D,EAAe,EAAC,uBAAS,4BAAO,WAKtD,GAAI+G,EAAOH,EAAcC,EAAWC,EAGzC,GAAKrG,EAGE,CAEL,MAAM4G,EAAcvE,GAAmB,gBACvC,IAAIwE,EAA0B,GAE9B,GAAoB,iBAAhBD,EAEFC,EAA0B,yDACrB,GAAoB,iBAAhBD,GAAwC,iBAAhBA,EAAsB,CACvD,MAAME,GA/CkBvE,EA+CgBhD,IA9C/B,GAAKgD,GAAS,EAAU,EACjCA,GAAS,IAAMA,GAAS,GAAW,EACnCA,GAAS,IAAMA,GAAS,GAAW,EAChC,EA4CCuE,EAAa,IACK,iBAAhBF,GACFF,EAAgB9H,cAAgBkI,EAChCD,EAAuB,qCAAAnL,OAAeoL,EAAU,0BAEhDJ,EAAgB7H,cAAgBiI,EAChCD,EAAuB,qCAAAnL,OAAeoL,EAAU,yBAGtD,CAEAL,EAAa,+DAAA/K,OAAqBmL,EACpC,MAxBErH,EAAgB,GAChBiH,EAAgB,yCA2BlBA,EAAgB,yDAhEYlE,MAmE9B7C,EAAemG,IAAI5B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACd4B,GAAI,IACPrH,KAAMqH,EAAKrH,KAAOkI,EAAgBlI,KAClCE,cAAemH,EAAKnH,cAAgBgI,EAAgBhI,cACpDC,QAASkH,EAAKlH,QAAU+H,EAAgB/H,QACxCC,aAAciH,EAAKjH,aAAe8H,EAAgB9H,aAClDC,aAAcgH,EAAKhH,aAAe6H,EAAgB7H,aAClDC,gBACE2H,EAAcM,SAAS,oCACM,iBAA7B1E,GAAmB,iBAAc4B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAEvB4B,EAAK/G,iBAAmB,CAAC,GAAG,CAAF,GAC9B,CAACC,IACG8G,EAAK/G,iBACL+G,EAAK/G,gBAAgBC,IACrB,GAAK,IAEX8G,EAAK/G,mBAGbqB,GAAgB,CAAErH,MAAM,EAAMsH,QAASqG,KAwLInM,SAC5B,kBAGDC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CACFC,GAAI,CACF7C,QAAS,OACTwD,cAAe,SACfuB,WAAY,SACZuH,GAAI,EACJpM,IAAK,GACLwC,SAAA,CAED8I,WAAWH,GAAY,8BAAY,IAClC1I,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAF,SAAA,EACFF,EAAAA,EAAAA,KAAC4M,EAAAA,EAAgB,CACfC,SACE7M,EAAAA,EAAAA,KAAC8M,EAAAA,EAAM,CACLC,QAASrH,EACTsH,SAAWjL,GACT4D,EAAsB5D,EAAEkL,OAAOF,SAEjC5C,KAAK,UAGT+C,MAAM,+BAER/M,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,UAAUhD,QAAQ,QAAO0C,SAAA,CAAC,gBACxC,IACHkL,OACCvC,GAAY,2CACZwC,iBAAkB,IAAI,qBAK7BrC,WAAWH,GAAY,8BAAY,IAClC1I,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAF,SAAA,EACFF,EAAAA,EAAAA,KAAC4M,EAAAA,EAAgB,CACfC,SACE7M,EAAAA,EAAAA,KAAC8M,EAAAA,EAAM,CACLC,QAASnH,EACToH,SAAWjL,GACT8D,EAAuB9D,EAAEkL,OAAOF,SAElC5C,KAAK,UAGT+C,MAAM,+BAER/M,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAACC,QAAQ,UAAUhD,QAAQ,QAAO0C,SAAA,CAAC,gBACxC,IACHkL,OACCvC,GAAY,2CACZwC,iBAAkB,IAAI,iBACnB,IACJ,MACC,MAAMzK,EAAQqH,GAAmB,gBAC3BE,EAAQhD,EACd,GAAc,iBAAVvE,EAAgB,MAAO,oCAC3B,GAAc,iBAAVA,EAAgB,CAOlB,MAAM,mCAANU,OALE6G,GAAS,GAAKA,GAAS,EACnB,EACAA,GAAS,IAAMA,GAAS,GACxB,EACA,EACe,SACvB,CACA,GAAc,iBAAVvH,EAAgB,CAOlB,MAAM,mCAANU,OALE6G,GAAS,GAAKA,GAAS,EACnB,EACAA,GAAS,IAAMA,GAAS,GACxB,EACA,EACe,SACvB,CACD,EAtBA,gBA6BXnI,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,QAAQO,MAAM,iBAAgBb,SAAC,sCAS5D+H,KACE5C,EAAWjB,KAAO,GACjBiB,EAAWhB,eAAiB,GAC5BgB,EAAWf,cAAgB,GAC3Be,EAAWd,QAAU,GACrBc,EAAWb,aAAe,GAC1Ba,EAAWZ,aAAe,GACzBY,EAAWX,iBACVxC,OAAO9D,KAAKiH,EAAWX,iBAAiByI,OAAS,KACnDhN,EAAAA,EAAAA,MAACwJ,EAAAA,EAAK,CAACC,UAAW,EAAGvJ,GAAI,CAAEjD,EAAG,EAAG0M,GAAI,EAAGnN,SAAU,YAAauD,SAAA,EAC7DC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CACFC,GAAI,CACF7C,QAAS,OACTyD,eAAgB,gBAChBsB,WAAY,SACZ7B,GAAI,GACJR,SAAA,EAEFF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,KAAIN,SAAC,4CACzBF,EAAAA,EAAAA,KAACuJ,EAAAA,EAAM,CACL/I,QAAQ,WACR2J,KAAK,QACLhJ,QAlSWiM,KACvB9H,EAAcnB,GACdiB,EAAgB,GAChBW,GAAgB,CAAErH,MAAM,EAAMsH,QAAS,uFA+RD9F,SAC3B,2BAIHC,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAC,iBAAKmF,EAAWjB,KAAKiH,qBACjClL,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAC,oCACDmF,EAAWhB,eAAegH,qBAErClL,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAC,0CACAmF,EAAWf,cAAc+G,qBAErClL,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAC,iDACEmF,EAAWd,QAAQ8G,oBAEhChG,EAAWb,aAAe,IACzBrE,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAC,oCACDmF,EAAWb,aAAa6G,oBAGpChG,EAAWZ,aAAe,IACzBtE,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAC,oCACDmF,EAAWZ,aAAa4G,oBAGpChG,EAAWX,iBACVxC,OAAOmL,QAAQhI,EAAWX,iBAAiB9E,IACzCnB,IAAA,IAAEU,EAAMmO,GAAM7O,EAAA,OACZ0B,EAAAA,EAAAA,MAACI,EAAAA,EAAU,CAAAL,SAAA,CAAY,sBAChBf,EAAK,KAAGmO,EAAMjC,iBAAiB,WADrBlM,SAQ7Ba,EAAAA,EAAAA,KAACuN,EAAAA,EAAQ,CACP7O,KAAMoH,EAAapH,KACnB8O,iBAAkB,IAClB7O,QAnUsB8O,CAACrD,EAAOsD,KACnB,cAAXA,GACJ3H,IAAe8D,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAI/D,GAAY,IAAEpH,MAAM,MAkUrCsH,QAASF,EAAaE,QACtB6E,aAAc,CAAEC,SAAU,SAAUC,WAAY,cAIxD,C,6FC7wBA,MAEM4C,EAAS,0CAAArM,OAFK,+CAEmD,2BAAAA,OAD3D,aAGG,SAASsM,IACtB,MAAM,MAAE1K,EAAK,cAAEC,IAAkBC,EAAAA,EAAAA,YAAWC,EAAAA,IACrCiE,EAAMuG,IAAWnK,EAAAA,EAAAA,UAASR,EAAM4K,gBAAkB,OAClDjK,EAASC,IAAcJ,EAAAA,EAAAA,WAAUR,EAAM4K,iBACvCC,EAAYC,IAAiBtK,EAAAA,EAAAA,UAAS,OAEtCuK,EAAgBC,IAAqBxK,EAAAA,EAAAA,UAAS,KAC9CyK,EAAqBC,IAA0B1K,EAAAA,EAAAA,UAAS,KACxD2K,EAAeC,IAAoB5K,EAAAA,EAAAA,UAAS,KAC5C6K,EAAoBC,IAAyB9K,EAAAA,EAAAA,UAAS,KAE7DuC,EAAAA,EAAAA,WAAU,KACUK,WAChB,GAAIpD,EAAM4K,eAGR,OAFAD,EAAQ3K,EAAM4K,qBACdhK,GAAW,GAIbA,GAAW,GACXkK,EAAc,MACd,IACE,MAAMtH,QAAiBC,MAAMgH,GAC7B,IAAKjH,EAASE,GACZ,MAAM,IAAI5E,MAAM,kGAElB,MAAM6E,QAAgBH,EAASI,OAE/BG,IAAAA,MAAWJ,EAAS,CAClBK,QAAQ,EACRC,gBAAgB,EAChBC,SAAWC,IACT,MAAMoH,EAAapH,EAAQC,KAAKzH,OAC7B0H,GAAQA,EAAI,8BAAYA,EAAI,8BAE/BsG,EAAQY,GACRtL,EAAc,iBAAkBsL,GAChC3K,GAAW,IAEbC,MAAQ6D,IACN,MAAM,IAAI5F,MAAM4F,EAAI5B,WAG1B,CAAE,MAAOjE,GACPiM,EAAcjM,EAAEiE,SAChBlC,GAAW,EACb,GAGFkE,IACC,CAAC9E,EAAM4K,eAAgB3K,IAE1B,MAAMuL,GAAWlP,EAAAA,EAAAA,SAAQ,IAClB8H,EACE,IAAI,IAAIvI,IAAIuI,EAAK1H,IAAKrB,GAASA,EAAK,gCAAY8J,KACrD,CAACC,EAAGC,IAAMD,EAAIC,GAFE,GAIjB,CAACjB,IAEEqH,GAAmBzP,EAAAA,EAAAA,aACtB0P,GACMtH,GAASsH,EACPtH,EACJzH,OAAQtB,GAASA,EAAK,+BAAaqQ,GACnChP,IAAKrB,GAASA,EAAK,8BACnB8J,KAAK,CAACC,EAAGC,IAAMD,EAAIC,GAJK,GAM7B,CAACjB,IAGGuH,GAAuBrP,EAAAA,EAAAA,SAC3B,IAAMmP,EAAiBV,GACvB,CAACU,EAAkBV,IAEfa,GAAsBtP,EAAAA,EAAAA,SAC1B,IAAMmP,EAAiBN,GACvB,CAACM,EAAkBN,KAGf,UAAEU,EAAS,MAAEhL,IAAUvE,EAAAA,EAAAA,SAAQ,KACnC,IACG8H,GACkB,KAAnB2G,GACwB,KAAxBE,GACkB,KAAlBE,GACuB,KAAvBE,EAEA,MAAO,CAAEQ,UAAW,KAAMhL,MAAO,MAGnC,GACEzE,SAAS2O,EAAgB,IAAM3O,SAAS+O,EAAe,KACtD/O,SAAS2O,EAAgB,MAAQ3O,SAAS+O,EAAe,KACxD/O,SAAS6O,EAAqB,KAAO7O,SAASiP,EAAoB,IAEpE,MAAO,CACLQ,UAAW,KACXhL,MAAO,gHAIX,MAAMiL,EAAY,CAChB,eACA,kCACA,8BACA,8BACA,+BAEIC,EAAQ,CACZC,eAAI,EACJ,kCAAU,GAGNC,EAAa7H,EAAK8H,UACrBC,GACCA,EAAE,+BAAapB,GACfoB,EAAE,+BAAalB,GAEbmB,EAAWhI,EAAK8H,UACnBC,GACCA,EAAE,+BAAahB,GACfgB,EAAE,+BAAad,GAInB,IAAK,IAAIgB,EAAIJ,EAAa,EAAGI,GAAKD,EAAUC,IAC1CP,EAAUQ,QAASC,IACjB,MAAMC,EAAQpI,EAAKiI,GAAGE,GACtB,GAAIC,EACF,GAAID,EAAIE,WAAW,6BAAU,CAC3B,MAAMC,EAAQF,EAAME,MAAM,oBAC1B,GAAIA,EAAO,CACT,MAAO,CAAEzQ,EAAM0Q,GAAUD,EACzBX,EAAM9P,EAAKwI,SACRsH,EAAM9P,EAAKwI,SAAW,GAAKrI,SAASuQ,EAAQ,GACjD,CACF,MACEZ,EAAMQ,IAAQR,EAAMQ,IAAQ,GAAKnQ,SAASoQ,EAAO,MAMzD,MAAO,CAAEX,UAAWE,EAAOlL,MAAO,OACjC,CACDuD,EACA2G,EACAE,EACAE,EACAE,IAGF,GAAI1K,EACF,OACE1D,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAE7C,QAAS,OAAQyD,eAAgB,SAAU7D,EAAG,GAAI8C,SAAA,EAC3DF,EAAAA,EAAAA,KAACsJ,EAAAA,EAAgB,KACjBtJ,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACF,GAAI,CAAEoK,GAAI,GAAIvK,SAAC,uFAKjC,GAAI6N,EACF,OAAO/N,EAAAA,EAAAA,KAAC8P,EAAAA,EAAK,CAACC,SAAS,QAAO7P,SAAE6N,IAGlC,MAAMiC,EAAiBA,CAAC9C,EAAOwC,EAAOO,EAASC,KAC7C/P,EAAAA,EAAAA,MAACgQ,EAAAA,EAAW,CAAC1G,WAAS,EAACpJ,GAAI,CAAEK,GAAI,GAAIR,SAAA,EACnCF,EAAAA,EAAAA,KAACoQ,EAAAA,EAAU,CAAAlQ,SAAEgN,KACblN,EAAAA,EAAAA,KAACqQ,EAAAA,EAAM,CACLX,MAAOA,EACPxC,MAAOA,EACPF,SAAWjL,GAAMkO,EAAQlO,EAAEkL,OAAOyC,OAAOxP,SAExCgQ,EAAQtQ,IAAK0Q,IACZtQ,EAAAA,EAAAA,KAACiL,EAAAA,EAAQ,CAAWyE,MAAOY,EAAIpQ,SAC5BoQ,GADYA,SAQvB,OACEnQ,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEjD,EAAG,GAAI8C,SAAA,EAIhBC,EAAAA,EAAAA,MAACwJ,EAAAA,EAAK,CAACtJ,GAAI,CAAEjD,EAAG,EAAGsD,GAAI,GAAIR,SAAA,EACzBF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,KAAIN,SAAC,8BACxB8P,EACC,4BACA/B,EACAC,EACAQ,GAEDsB,EACC,4BACA7B,EACAC,EACAS,OAGJ1O,EAAAA,EAAAA,MAACwJ,EAAAA,EAAK,CAACtJ,GAAI,CAAEjD,EAAG,EAAGsD,GAAI,GAAIR,SAAA,EACzBF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,KAAIN,SAAC,8BACxB8P,EAAe,4BAAS3B,EAAeC,EAAkBI,GACzDsB,EACC,4BACAzB,EACAC,EACAM,MAIH/K,IAAS/D,EAAAA,EAAAA,KAAC8P,EAAAA,EAAK,CAACC,SAAS,QAAO7P,SAAE6D,IAElCgL,IAAchL,IACb/D,EAAAA,EAAAA,KAACuQ,EAAAA,EAAc,CAAC9P,UAAWkJ,EAAAA,EAAMzJ,UAC/BF,EAAAA,EAAAA,KAACwQ,EAAAA,EAAK,CAACrG,KAAK,QAAOjK,UACjBC,EAAAA,EAAAA,MAACsQ,EAAAA,EAAS,CAAAvQ,SAAA,EACRF,EAAAA,EAAAA,KAAC0Q,EAAAA,EAAQ,CAAAxQ,UACPF,EAAAA,EAAAA,KAAC2Q,EAAAA,EAAS,CACRC,QAAS,EACTvQ,GAAI,CAAEsC,WAAY,OAAQ9B,UAAW,UAAWX,SACjD,6CAIFgC,OAAOmL,QAAQ0B,GAAWnP,IACzBnB,IAAA,IAAEoS,EAAKnB,GAAMjR,EAAA,OACXiR,EAAQ,IACNvP,EAAAA,EAAAA,MAACuQ,EAAAA,EAAQ,CAAAxQ,SAAA,EACPF,EAAAA,EAAAA,KAAC2Q,EAAAA,EAAS,CAAAzQ,SAAE2Q,KACZ7Q,EAAAA,EAAAA,KAAC2Q,EAAAA,EAAS,CAACG,MAAM,QAAO5Q,SACrBwP,EAAMrE,qBAHIwF,cAcnC,C,qCC7QA,SAASE,EAASC,GAChB,MAAM,SAAE9Q,EAAQ,MAAEwP,EAAK,MAAEuB,GAAoBD,EAAVE,GAAKC,EAAAA,EAAAA,GAAKH,EAAKI,GAElD,OACEpR,EAAAA,EAAAA,KAAA,OAAA6J,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACEwH,KAAK,WACLC,OAAQ5B,IAAUuB,EAClBtP,GAAE,oBAAAL,OAAsB2P,GACxB,iCAAA3P,OAAgC2P,IAC5BC,GAAK,IAAAhR,SAERwP,IAAUuB,IACTjR,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAACC,GAAI,CAAEjD,EAAG,GAAI8C,UAChBF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACE,UAAU,MAAKP,SAAEA,QAKvC,CAEe,SAASqR,IACtB,MAAO7B,EAAO8B,IAAY9N,EAAAA,EAAAA,UAAS,GAMnC,OACEvD,EAAAA,EAAAA,MAAAgL,EAAAA,SAAA,CAAAjL,SAAA,EACEF,EAAAA,EAAAA,KAACyR,EAAAA,EAAS,CAAAvR,UACRF,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAACC,GAAI,CAAEqR,GAAI,EAAG7Q,UAAW,UAAWX,UACtCF,EAAAA,EAAAA,KAACO,EAAAA,EAAU,CAACC,QAAQ,KAAKC,UAAU,KAAKyK,cAAY,EAAAhL,SAAC,qDAKzDC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEtD,MAAO,QAASmD,SAAA,EACzBF,EAAAA,EAAAA,KAAC2R,EAAAA,EAAM,CAAChV,SAAS,SAAQuD,UACvBC,EAAAA,EAAAA,MAACyR,EAAAA,EAAI,CAAClC,MAAOA,EAAO1C,SAfP6E,CAACzH,EAAO0H,KAC3BN,EAASM,IAcyCtR,QAAQ,YAAWN,SAAA,EAC7DF,EAAAA,EAAAA,KAAC+R,EAAAA,EAAG,CAAC7E,MAAM,+BACXlN,EAAAA,EAAAA,KAAC+R,EAAAA,EAAG,CAAC7E,MAAM,0CAGflN,EAAAA,EAAAA,KAAC+Q,EAAQ,CAACrB,MAAOA,EAAOuB,MAAO,EAAE/Q,UAC/BF,EAAAA,EAAAA,KAACiD,EAAa,OAEhBjD,EAAAA,EAAAA,KAAC+Q,EAAQ,CAACrB,MAAOA,EAAOuB,MAAO,EAAE/Q,UAC/BF,EAAAA,EAAAA,KAAC4N,EAAW,WAKtB,C","sources":["components/WeaponSelectionModal/WeaponSelectionModal.styles.js","components/WeaponSelectionModal/WeaponSelectionModal.js","assets/images/weapons|sync|nonrecursive|/.(png%7Cjpe?g%7Csvg%7Cwebp)$","utils/gradeColor.js","components/EnhSim/SpecialWeapon/SpecialWeapon.styles.js","components/EnhSim/SpecialWeapon/SpecialWeapon.js","components/EnhSim/ClassWeapon/ClassWeapon.js","components/EnhSim/EnhSim.js"],"sourcesContent":["import { getCardColorByGrade } from \"../../utils/gradeColor\";\r\n\r\nexport const modalStyle = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"90%\",\r\n  maxWidth: 500,\r\n  bgcolor: \"background.paper\",\r\n  border: \"2px solid #000\",\r\n  boxShadow: 24,\r\n  p: 2,\r\n  maxHeight: \"80vh\",\r\n  overflowY: \"auto\",\r\n};\r\n\r\nexport const modalGrid = {\r\n  display: \"grid\",\r\n  gridTemplateColumns: \"repeat(3, 1fr)\",\r\n  gap: 1,\r\n};\r\n\r\nexport const modalWeaponCard = (grade) => ({\r\n  border: \"1px solid #ddd\",\r\n  textAlign: \"center\",\r\n  backgroundColor: getCardColorByGrade(grade),\r\n  color: \"white\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  justifyContent: \"space-between\",\r\n});\r\n\r\nexport const modalWeaponImage = {\r\n  width: \"100%\",\r\n  height: 60,\r\n  objectFit: \"contain\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.1)\",\r\n};\r\n\r\nexport const modalWeaponName = {\r\n  fontSize: \"0.75rem\",\r\n  p: 1,\r\n};","import React, { useMemo, useCallback } from \"react\";\r\nimport {\r\n  Modal,\r\n  Box,\r\n  Typography,\r\n  Card,\r\n  CardActionArea,\r\n  CardMedia,\r\n  CardContent,\r\n} from \"@mui/material\";\r\nimport * as styles from \"./WeaponSelectionModal.styles\";\r\n\r\n// 무기 이미지 로드\r\nconst images = require.context(\r\n  \"../../assets/images/weapons\",\r\n  false,\r\n  /\\.(png|jpe?g|svg|webp)$/\r\n);\r\nconst weaponImages = images.keys().reduce((acc, item) => {\r\n  const key = item.replace(\"./\", \"\");\r\n  acc[key] = images(item);\r\n  return acc;\r\n}, {});\r\n\r\nconst WeaponSelectionModal = ({\r\n  open,\r\n  onClose,\r\n  onWeaponSelect,\r\n  weaponsData,\r\n  excludedNames = new Set(),\r\n  excludedGrades = new Set(),\r\n}) => {\r\n  const getBaseWeaponData = useCallback(\r\n    (name) => {\r\n      return (\r\n        weaponsData.find(\r\n          (w) => w[\"이름\"] === name && parseInt(w[\"강화 차수\"], 10) === 0\r\n        ) || weaponsData.find((w) => w[\"이름\"] === name)\r\n      );\r\n    },\r\n    [weaponsData]\r\n  );\r\n\r\n  const uniqueWeaponNames = useMemo(() => {\r\n    if (!weaponsData) return [];\r\n\r\n    const nameCounts = weaponsData.reduce((acc, w) => {\r\n      const name = w[\"이름\"];\r\n      if (name) {\r\n        acc[name] = (acc[name] || 0) + 1;\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    const allUniqueNames = Array.from(\r\n      new Set(weaponsData.map((w) => w[\"이름\"]))\r\n    );\r\n\r\n    return allUniqueNames.filter((name) => {\r\n      if (!name || nameCounts[name] <= 1 || excludedNames.has(name)) {\r\n        return false;\r\n      }\r\n      const weapon = getBaseWeaponData(name);\r\n      return weapon && !excludedGrades.has(weapon[\"등급\"]);\r\n    });\r\n  }, [weaponsData, excludedNames, excludedGrades, getBaseWeaponData]);\r\n\r\n  return (\r\n    <Modal open={open} onClose={onClose}>\r\n      <Box sx={styles.modalStyle}>\r\n        <Typography variant=\"h6\" component=\"h2\" sx={{ mb: 2 }}>\r\n          무기 선택\r\n        </Typography>\r\n        <Box sx={styles.modalGrid}>\r\n          {uniqueWeaponNames.map((name) => {\r\n            const weapon = getBaseWeaponData(name);\r\n            if (!weapon) return null;\r\n            return (\r\n              <Card key={name} sx={styles.modalWeaponCard(weapon[\"등급\"])}>\r\n                <CardActionArea onClick={() => onWeaponSelect(name)}>\r\n                  <CardMedia\r\n                    component=\"img\"\r\n                    sx={styles.modalWeaponImage}\r\n                    image={weaponImages[`${weapon[\"이미지 파일\"]}.webp`]}\r\n                    alt={name}\r\n                  />\r\n                  <CardContent sx={{ p: 0 }}>\r\n                    <Typography sx={styles.modalWeaponName}>{name}</Typography>\r\n                  </CardContent>\r\n                </CardActionArea>\r\n              </Card>\r\n            );\r\n          })}\r\n        </Box>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default WeaponSelectionModal;\r\n","var map = {\n\t\"./abyss_sword.webp\": 5035,\n\t\"./abyss_sword_old.webp\": 4677,\n\t\"./acheron.webp\": 8607,\n\t\"./arcana.webp\": 9465,\n\t\"./arteon.webp\": 1966,\n\t\"./awakened_gold_moon.webp\": 5147,\n\t\"./awakened_olympus.webp\": 2525,\n\t\"./awakened_valhalla.webp\": 7257,\n\t\"./battle_dancer.webp\": 9177,\n\t\"./blast.webp\": 3907,\n\t\"./blaster.webp\": 9384,\n\t\"./blink.webp\": 7135,\n\t\"./blitz_dagger.webp\": 3289,\n\t\"./bracelet_of_life.webp\": 3768,\n\t\"./bunny_bunny.webp\": 7978,\n\t\"./carrot_ball.webp\": 4220,\n\t\"./cayenne.webp\": 4796,\n\t\"./death_fire.webp\": 8284,\n\t\"./death_grip.webp\": 2524,\n\t\"./death_grip_old.webp\": 7974,\n\t\"./dragonia.webp\": 8742,\n\t\"./easter.webp\": 1997,\n\t\"./easter_old.webp\": 9703,\n\t\"./echo.webp\": 5078,\n\t\"./echo_old.webp\": 2440,\n\t\"./egg_boom.webp\": 9118,\n\t\"./evergreen.webp\": 3350,\n\t\"./flame.webp\": 730,\n\t\"./flame_wand.webp\": 1521,\n\t\"./flamos.webp\": 2629,\n\t\"./frost_wand.webp\": 4850,\n\t\"./frozen_staff.webp\": 8612,\n\t\"./frozen_staff_old.webp\": 3502,\n\t\"./gold_moon.webp\": 3335,\n\t\"./guardians_shield.webp\": 1471,\n\t\"./haken.webp\": 3922,\n\t\"./hastur_staff.webp\": 9001,\n\t\"./hastur_staff_old.webp\": 1491,\n\t\"./holy_burst_hammer.webp\": 31,\n\t\"./ignis.webp\": 2883,\n\t\"./illusion_shuriken.webp\": 2634,\n\t\"./lethe.webp\": 4243,\n\t\"./lightning_gauntlets.webp\": 2223,\n\t\"./lightning_wand.webp\": 293,\n\t\"./lindell_staff.webp\": 7496,\n\t\"./lucion.webp\": 6093,\n\t\"./lucky_bag.webp\": 4792,\n\t\"./lumiere_harp.webp\": 4832,\n\t\"./nightfall.webp\": 6345,\n\t\"./olympus.webp\": 7154,\n\t\"./otterment.webp\": 8119,\n\t\"./phlegethon.webp\": 6745,\n\t\"./plasma_staff.webp\": 1152,\n\t\"./pletan.webp\": 245,\n\t\"./radiant.webp\": 9234,\n\t\"./ragnarhelm.webp\": 5580,\n\t\"./raven_wand.webp\": 3830,\n\t\"./rhapsody.webp\": 6701,\n\t\"./rhapsody_old.webp\": 1652,\n\t\"./ring_of_life.webp\": 7446,\n\t\"./rocket_launcher.webp\": 4164,\n\t\"./santa_staff.webp\": 4005,\n\t\"./shadow_dagger.webp\": 1262,\n\t\"./shadow_knight.webp\": 8213,\n\t\"./shadow_sword.webp\": 841,\n\t\"./slate_weaver.webp\": 3341,\n\t\"./solar_scepter.webp\": 4913,\n\t\"./soul_binder.webp\": 9,\n\t\"./spirit_axe.webp\": 6049,\n\t\"./spring_shot.webp\": 5503,\n\t\"./spring_shot_old.webp\": 2073,\n\t\"./storm_leon.webp\": 9135,\n\t\"./summer_shine.webp\": 654,\n\t\"./summer_sword.webp\": 4380,\n\t\"./swift_bow.webp\": 69,\n\t\"./sylvania.webp\": 1136,\n\t\"./sylvania_crossbow.webp\": 3829,\n\t\"./sylvanir_bow.webp\": 946,\n\t\"./terra_hammer.webp\": 8682,\n\t\"./upgrade_gold_moon.webp\": 3704,\n\t\"./upgrade_olympus.webp\": 8013,\n\t\"./upgrade_valhalla.webp\": 3337,\n\t\"./valhalla.webp\": 8340,\n\t\"./wind_staff.webp\": 3980,\n\t\"./wither_scoop.webp\": 6443,\n\t\"./wither_staff.webp\": 6613,\n\t\"./zephyr.webp\": 1309\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4749;","export const getCardColorByGrade = (grade) => {\r\n  switch (grade) {\r\n    case \"필멸\":\r\n      return \"#d32f2f\"; // 빨간색 계열\r\n    case \"전설\":\r\n      return \"#fbc02d\"; // 노란색 계열\r\n    case \"영웅\":\r\n      return \"#9c27b0\"; // 보라색 계열\r\n    case \"운명\":\r\n      return \"#1565c0\"; // 어두운 파란색 계열\r\n    case \"희귀\":\r\n      return \"#1976d2\"; // 파란색 계열\r\n    case \"고급\":\r\n      return \"#388e3c\"; // 녹색 계열\r\n    case \"보스\":\r\n      return \"#ffb6c1\"; // 연분홍색 계열\r\n    case \"기타\":\r\n      return \"#66cdaa\"; // 민트색 계열\r\n    case \"일반\":\r\n    default:\r\n      return \"#616161\"; // 회색 계열\r\n  }\r\n};\r\n","export const selectedWeaponPaper = {\r\n  p: 2,\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  gap: 2,\r\n};\r\n\r\nexport const weaponImage = {\r\n  width: 80,\r\n  height: 80,\r\n  objectFit: \"contain\",\r\n  backgroundColor: \"rgba(0,0,0,0.05)\",\r\n  borderRadius: 1,\r\n};\r\n\r\nexport const weaponName = {\r\n  fontWeight: \"bold\",\r\n};\r\n","import React, { useState, useEffect, useContext, useMemo } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  CircularProgress,\r\n  Paper,\r\n  Button,\r\n  Menu,\r\n  MenuItem,\r\n  Switch,\r\n  FormControlLabel,\r\n  Snackbar,\r\n} from \"@mui/material\";\r\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\r\nimport { CacheContext } from \"../../../contexts/CacheContext\";\r\nimport WeaponSelectionModal from \"../../WeaponSelectionModal\";\r\nimport * as styles from \"./SpecialWeapon.styles\";\r\n\r\n// Weapons.js와 동일한 Google Sheet 정보를 사용합니다.\r\nconst BASE_URL_ID = \"1IZra9ZZRwBBgT4ai1W0fCATeFFsztHnF0k03DmLr1tI\";\r\nconst WEAPONS_GID = \"0\";\r\nconst GUARANTEED_ENH_GID = \"2088796296\"; // 확정 강화 비용 시트 GID\r\nconst PROB_ENH_GID = \"665507476\"; // 확률 강화 비용 시트 GID\r\n\r\nconst WEAPONS_SHEET_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${WEAPONS_GID}`;\r\nconst GUARANTEED_ENH_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${GUARANTEED_ENH_GID}`;\r\nconst PROB_ENH_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${PROB_ENH_GID}`;\r\n\r\n// 무기 이미지 로드\r\nconst images = require.context(\r\n  \"../../../assets/images/weapons\",\r\n  false,\r\n  /\\.(png|jpe?g|svg|webp)$/\r\n);\r\n\r\nconst weaponImages = images.keys().reduce((acc, item) => {\r\n  const key = item.replace(\"./\", \"\");\r\n  acc[key] = images(item);\r\n  return acc;\r\n}, {});\r\n\r\nconst SIM_STATE_CACHE_KEY = \"specialWeaponEnhSimState\";\r\n\r\n// 하드코딩으로 제외할 무기 이름 목록\r\nconst excludedNames = new Set([\r\n  \"방랑자, 플레탄\",\r\n  \"서머 샤인\",\r\n  \"오터먼트\",\r\n  \"생명의 반지\",\r\n  \"플레임\",\r\n  \"실바니아\",\r\n  \"산타 스태프\",\r\n  \"섀도우 소드\",\r\n  \"섀도우 대거\",\r\n]);\r\n\r\n// 하드코딩으로 제외할 무기 등급 목록\r\nconst excludedGrades = new Set([\"보스\", \"운명\", \"기타\"]);\r\n\r\nexport default function SpecialWeapon() {\r\n  const { cache, setCacheValue } = useContext(CacheContext);\r\n  const { weapons: allWeaponsData } = cache;\r\n  const [guaranteedEnhCosts, setGuaranteedEnhCosts] = useState([]);\r\n  const [probEnhCosts, setProbEnhCosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const initialTotalCosts = {\r\n    gold: 0,\r\n    formlessShards: 0,\r\n    refinedStones: 0,\r\n    rawOres: 0,\r\n    purplePowder: 0,\r\n    yellowPowder: 0,\r\n    consumedWeapons: {},\r\n  };\r\n\r\n  // useState의 지연 초기화(lazy initial state)를 사용하여 sessionStorage에서 totalCosts를 한 번만 읽어옵니다.\r\n  const [selectedWeaponName, setSelectedWeaponName] = useState(() => {\r\n    try {\r\n      const savedStateJSON = sessionStorage.getItem(SIM_STATE_CACHE_KEY);\r\n      if (savedStateJSON) {\r\n        const savedState = JSON.parse(savedStateJSON);\r\n        return savedState.selectedWeaponName || \"\";\r\n      }\r\n    } catch (error) {\r\n      console.error(\r\n        \"Failed to parse selectedWeaponName from sessionStorage\",\r\n        error\r\n      );\r\n    }\r\n    return \"\";\r\n  });\r\n\r\n  const [currentLevel, setCurrentLevel] = useState(() => {\r\n    try {\r\n      const savedStateJSON = sessionStorage.getItem(SIM_STATE_CACHE_KEY);\r\n      if (savedStateJSON) {\r\n        const savedState = JSON.parse(savedStateJSON);\r\n        return savedState.currentLevel || 0;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to parse currentLevel from sessionStorage\", error);\r\n    }\r\n    return 0;\r\n  });\r\n\r\n  const [totalCosts, setTotalCosts] = useState(() => {\r\n    try {\r\n      const savedStateJSON = sessionStorage.getItem(SIM_STATE_CACHE_KEY);\r\n      if (savedStateJSON) {\r\n        const savedState = JSON.parse(savedStateJSON);\r\n        if (savedState.totalCosts) {\r\n          // 호환성을 위해 consumedWeapons가 객체인지 확인\r\n          if (\r\n            typeof savedState.totalCosts.consumedWeapons !== \"object\" ||\r\n            savedState.totalCosts.consumedWeapons === null\r\n          ) {\r\n            savedState.totalCosts.consumedWeapons = {};\r\n          }\r\n          return savedState.totalCosts;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to parse totalCosts from sessionStorage\", error);\r\n    }\r\n    // 저장된 값이 없거나 오류 발생 시 초기값 반환\r\n    return initialTotalCosts;\r\n  });\r\n\r\n  const [skipMenuAnchorEl, setSkipMenuAnchorEl] = useState(null);\r\n  const [isFallPreventionOn, setIsFallPreventionOn] = useState(false);\r\n  const [isResetPreventionOn, setIsResetPreventionOn] = useState(false);\r\n  const [snackbarInfo, setSnackbarInfo] = useState({\r\n    open: false,\r\n    message: \"\",\r\n  });\r\n\r\n  // 데이터 로드 후, 저장된 무기 이름이 유효하지 않으면 초기화\r\n  useEffect(() => {\r\n    if (!allWeaponsData || !selectedWeaponName) return;\r\n\r\n    const nameCounts = allWeaponsData.reduce((acc, w) => {\r\n      const name = w[\"이름\"];\r\n      if (name) {\r\n        acc[name] = (acc[name] || 0) + 1;\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    const isEnhanceable = (name) => nameCounts[name] > 1;\r\n\r\n    const getBaseWeaponData = (name) => {\r\n      return (\r\n        allWeaponsData.find(\r\n          (w) => w[\"이름\"] === name && parseInt(w[\"강화 차수\"], 10) === 0\r\n        ) || allWeaponsData.find((w) => w[\"이름\"] === name)\r\n      );\r\n    };\r\n\r\n    const weapon = getBaseWeaponData(selectedWeaponName);\r\n\r\n    if (\r\n      !weapon ||\r\n      !isEnhanceable(selectedWeaponName) ||\r\n      excludedNames.has(selectedWeaponName) ||\r\n      excludedGrades.has(weapon[\"등급\"])\r\n    ) {\r\n      setSelectedWeaponName(\"\");\r\n    }\r\n  }, [allWeaponsData, selectedWeaponName]);\r\n\r\n  // 상태 변경 시 sessionStorage에 저장\r\n  useEffect(() => {\r\n    const stateToSave = { selectedWeaponName, currentLevel, totalCosts };\r\n    sessionStorage.setItem(SIM_STATE_CACHE_KEY, JSON.stringify(stateToSave));\r\n  }, [selectedWeaponName, currentLevel, totalCosts]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const fetchAndParse = async (url, cacheKey) => {\r\n        if (cache[cacheKey]) {\r\n          return cache[cacheKey];\r\n        }\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n          throw new Error(`'${cacheKey}' 데이터를 가져오는 데 실패했습니다.`);\r\n        }\r\n        const csvText = await response.text();\r\n        return new Promise((resolve, reject) => {\r\n          Papa.parse(csvText, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete: (results) => {\r\n              const data = results.data.filter((row) =>\r\n                Object.values(row).some((val) => val && val.trim() !== \"\")\r\n              );\r\n              setCacheValue(cacheKey, data);\r\n              resolve(data);\r\n            },\r\n            error: (err) => reject(new Error(err.message)),\r\n          });\r\n        });\r\n      };\r\n\r\n      try {\r\n        const [, guaranteedData, probData] = await Promise.all([\r\n          fetchAndParse(WEAPONS_SHEET_URL, \"weapons\"),\r\n          fetchAndParse(GUARANTEED_ENH_URL, \"guaranteedEnhCosts\"),\r\n          fetchAndParse(PROB_ENH_URL, \"probEnhCosts\"),\r\n        ]);\r\n\r\n        setGuaranteedEnhCosts(guaranteedData);\r\n        setProbEnhCosts(probData);\r\n      } catch (e) {\r\n        setError(e.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (!allWeaponsData) {\r\n      fetchData();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [cache, setCacheValue, allWeaponsData]);\r\n\r\n  const selectedWeaponData = useMemo(() => {\r\n    if (!selectedWeaponName || !allWeaponsData) return null;\r\n    return (\r\n      allWeaponsData.find(\r\n        (w) =>\r\n          w[\"이름\"] === selectedWeaponName && parseInt(w[\"강화 차수\"], 10) === 0\r\n      ) || allWeaponsData.find((w) => w[\"이름\"] === selectedWeaponName)\r\n    );\r\n  }, [allWeaponsData, selectedWeaponName]);\r\n\r\n  const availableEnhancementLevels = useMemo(() => {\r\n    if (!selectedWeaponName || !allWeaponsData) return [];\r\n    return allWeaponsData\r\n      .filter((w) => w[\"이름\"] === selectedWeaponName)\r\n      .map((w) => parseInt(w[\"강화 차수\"], 10))\r\n      .filter((level) => !isNaN(level))\r\n      .sort((a, b) => a - b);\r\n  }, [allWeaponsData, selectedWeaponName]);\r\n\r\n  const handleSkipMenuOpen = (event) => {\r\n    setSkipMenuAnchorEl(event.currentTarget);\r\n  };\r\n  const handleSkipMenuClose = () => setSkipMenuAnchorEl(null);\r\n\r\n  const handleOpenModal = () => setIsModalOpen(true);\r\n  const handleCloseModal = () => setIsModalOpen(false);\r\n\r\n  const guaranteedEnhCost = useMemo(() => {\r\n    if (!selectedWeaponData) return null;\r\n\r\n    const nextLevel = currentLevel + 1;\r\n    return guaranteedEnhCosts.find(\r\n      (cost) =>\r\n        cost[\"등급\"] === selectedWeaponData[\"등급\"] &&\r\n        parseInt(cost[\"강화 차수\"], 10) === nextLevel\r\n    );\r\n  }, [selectedWeaponData, currentLevel, guaranteedEnhCosts]);\r\n\r\n  const probEnhCost = useMemo(() => {\r\n    if (!selectedWeaponData) return null;\r\n\r\n    const nextLevel = currentLevel + 1;\r\n    return probEnhCosts.find(\r\n      (cost) =>\r\n        cost[\"등급\"] === selectedWeaponData[\"등급\"] &&\r\n        parseInt(cost[\"강화 차수\"], 10) === nextLevel\r\n    );\r\n  }, [selectedWeaponData, currentLevel, probEnhCosts]);\r\n\r\n  const displayProbabilities = useMemo(() => {\r\n    if (!probEnhCost) return null;\r\n\r\n    let success = parseFloat(probEnhCost[\"성공 확률\"]) || 0;\r\n    let maintain = parseFloat(probEnhCost[\"실패 확률\"]) || 0;\r\n    let fall = parseFloat(probEnhCost[\"하락 확률\"]) || 0;\r\n    let reset = parseFloat(probEnhCost[\"리셋 확률\"]) || 0;\r\n\r\n    if (isFallPreventionOn) {\r\n      const reducedSuccess = success / 2;\r\n      maintain += reducedSuccess; // 감소한 성공 확률만큼 유지 확률 증가\r\n      maintain += fall; // 기존 하락 확률을 유지 확률에 더함\r\n      success = reducedSuccess; // 성공 확률 절반으로 감소\r\n      fall = 0; // 하락 확률은 0이 됨\r\n    }\r\n\r\n    return {\r\n      success,\r\n      maintain,\r\n      fall,\r\n      reset,\r\n    };\r\n  }, [probEnhCost, isFallPreventionOn]);\r\n\r\n  const handleWeaponSelect = (name) => {\r\n    setSelectedWeaponName(name);\r\n    setCurrentLevel(0); // 무기 선택 시 강화 레벨 초기화\r\n    handleCloseModal();\r\n  };\r\n\r\n  // 무기가 바뀌면 방지 옵션 초기화\r\n  useEffect(() => {\r\n    setIsFallPreventionOn(false);\r\n    setIsResetPreventionOn(false);\r\n  }, [selectedWeaponName]);\r\n\r\n  // 강화 레벨이 바뀔 때, 사용 불가능해진 방지 옵션만 초기화\r\n  useEffect(() => {\r\n    const nextProbEnhCost = probEnhCosts.find(\r\n      (cost) =>\r\n        cost[\"등급\"] === selectedWeaponData?.[\"등급\"] &&\r\n        parseInt(cost[\"강화 차수\"], 10) === currentLevel + 1\r\n    );\r\n\r\n    if (!(parseFloat(nextProbEnhCost?.[\"하락 확률\"]) > 0))\r\n      setIsFallPreventionOn(false);\r\n    if (!(parseFloat(nextProbEnhCost?.[\"리셋 확률\"]) > 0))\r\n      setIsResetPreventionOn(false);\r\n  }, [currentLevel, probEnhCosts, selectedWeaponData]);\r\n\r\n  const handleGuaranteedEnhance = () => {\r\n    if (!guaranteedEnhCost) return;\r\n\r\n    const goldCost = parseInt(guaranteedEnhCost[\"골드\"], 10) || 0;\r\n    const shardCost = parseInt(guaranteedEnhCost[\"무형의 파편\"], 10) || 0;\r\n\r\n    setTotalCosts((prev) => ({\r\n      ...prev,\r\n      gold: prev.gold + goldCost,\r\n      formlessShards: prev.formlessShards + shardCost,\r\n      // 확정 강화는 다른 재화를 소모하지 않으므로 나머지는 그대로 유지\r\n    }));\r\n\r\n    setCurrentLevel((prev) => prev + 1);\r\n  };\r\n\r\n  const handleProbEnhance = () => {\r\n    if (!probEnhCost) return;\r\n\r\n    let goldCost = parseInt(probEnhCost[\"골드\"], 10) || 0;\r\n    const refinedStoneCost = parseInt(probEnhCost[\"정교한 강화석\"], 10) || 0;\r\n    const rawOreCost = parseInt(probEnhCost[\"미가공 강화 원석\"], 10) || 0;\r\n\r\n    let successRate = parseFloat(probEnhCost[\"성공 확률\"]) || 0;\r\n    let fallRate = parseFloat(probEnhCost[\"하락 확률\"]) || 0; // '하락 확률' 열을 사용\r\n    const resetRate = parseFloat(probEnhCost[\"리셋 확률\"]) || 0;\r\n    // '실패 확률'은 이제 '유지 확률'을 의미합니다.\r\n    // let failAndMaintainRate = parseFloat(probEnhCost[\"실패 확률\"]) || 0;\r\n\r\n    if (isFallPreventionOn) {\r\n      goldCost += parseInt(probEnhCost[\"하락 방지 비용\"], 10) || 0;\r\n\r\n      const reducedSuccessRate = successRate / 2;\r\n      // failAndMaintainRate += reducedSuccessRate; // 감소한 성공 확률만큼 실패(유지) 확률 증가\r\n      // failAndMaintainRate += fallRate; // 기존 하락 확률을 실패(유지) 확률에 더함\r\n      successRate = reducedSuccessRate; // 성공 확률 절반으로 감소\r\n      fallRate = 0; // 하락 확률은 0이 됨\r\n    }\r\n    if (isResetPreventionOn) {\r\n      goldCost += parseInt(probEnhCost[\"리셋 방지 비용\"], 10) || 0;\r\n    }\r\n\r\n    // 리셋 방지 시 추가 아이템 소모량 계산을 위한 함수\r\n    const getPowderCostByLevel = (level) => {\r\n      if (level >= 7 && level <= 9) return 1;\r\n      if (level >= 10 && level <= 12) return 2;\r\n      if (level >= 13 && level <= 15) return 3;\r\n      return 0;\r\n    };\r\n\r\n    const rand = Math.random();\r\n    let resultMessage = \"\";\r\n    let additionalCosts = {\r\n      gold: goldCost,\r\n      refinedStones: refinedStoneCost,\r\n      rawOres: rawOreCost,\r\n      purplePowder: 0,\r\n      yellowPowder: 0,\r\n    };\r\n\r\n    if (rand < successRate) {\r\n      // 성공\r\n      setCurrentLevel((prev) => prev + 1);\r\n      resultMessage = `강화 성공! (+${currentLevel + 1})`;\r\n    } else if (rand < successRate + fallRate) {\r\n      // 성공 확률 다음은 하락 확률 구간\r\n      // 실패 (하락)\r\n      if (!isFallPreventionOn) {\r\n        setCurrentLevel((prev) => Math.max(0, prev - 1));\r\n        resultMessage = `강화 실패... (${\r\n          currentLevel > 0 ? `+${currentLevel - 1}로 하락` : \"변동 없음\"\r\n        })`;\r\n      } else {\r\n        resultMessage = \"강화 실패! (하락 방지됨)\";\r\n      }\r\n    } else if (rand < successRate + fallRate + resetRate) {\r\n      // 그 다음은 리셋 확률 구간\r\n      // 리셋\r\n      if (!isResetPreventionOn) {\r\n        setCurrentLevel(0);\r\n        resultMessage = \"강화 리셋... (+0)\";\r\n      } else {\r\n        // 리셋 방지가 실제로 적용되었을 때 추가 아이템 소모\r\n        const weaponGrade = selectedWeaponData[\"등급\"];\r\n        let additionalResultMessage = \"\";\r\n\r\n        if (weaponGrade === \"필멸\") {\r\n          // 이 비용은 setTotalCosts에서 직접 처리\r\n          additionalResultMessage = \" (동일 무기 1개 소모)\";\r\n        } else if (weaponGrade === \"영웅\" || weaponGrade === \"전설\") {\r\n          const powderCost = getPowderCostByLevel(currentLevel); // 현재 레벨 기준\r\n          if (powderCost > 0) {\r\n            if (weaponGrade === \"영웅\") {\r\n              additionalCosts.purplePowder += powderCost;\r\n              additionalResultMessage = ` (보라색 가루 ${powderCost}개 소모)`;\r\n            } else {\r\n              additionalCosts.yellowPowder += powderCost;\r\n              additionalResultMessage = ` (노란색 가루 ${powderCost}개 소모)`;\r\n            }\r\n          }\r\n        }\r\n\r\n        resultMessage = `강화 실패! (리셋 방지됨)${additionalResultMessage}`;\r\n      }\r\n    } else {\r\n      // 나머지는 모두 유지 구간\r\n      // 유지\r\n      resultMessage = \"강화 실패! (등급 유지)\";\r\n    }\r\n\r\n    setTotalCosts((prev) => ({\r\n      ...prev,\r\n      gold: prev.gold + additionalCosts.gold,\r\n      refinedStones: prev.refinedStones + additionalCosts.refinedStones,\r\n      rawOres: prev.rawOres + additionalCosts.rawOres,\r\n      purplePowder: prev.purplePowder + additionalCosts.purplePowder,\r\n      yellowPowder: prev.yellowPowder + additionalCosts.yellowPowder,\r\n      consumedWeapons:\r\n        resultMessage.includes(\"리셋 방지됨\") &&\r\n        selectedWeaponData[\"등급\"] === \"필멸\"\r\n          ? {\r\n              ...(prev.consumedWeapons || {}),\r\n              [selectedWeaponName]:\r\n                ((prev.consumedWeapons &&\r\n                  prev.consumedWeapons[selectedWeaponName]) ||\r\n                  0) + 1,\r\n            }\r\n          : prev.consumedWeapons,\r\n    }));\r\n\r\n    setSnackbarInfo({ open: true, message: resultMessage });\r\n  };\r\n\r\n  const handleSkipToLevel = (targetLevel) => {\r\n    // 건너뛰기 시에는 재화를 누적하지 않고 레벨만 변경합니다.\r\n    setCurrentLevel(targetLevel);\r\n\r\n    handleSkipMenuClose();\r\n  };\r\n\r\n  const handleResetCosts = () => {\r\n    setTotalCosts(initialTotalCosts);\r\n    setCurrentLevel(0);\r\n    setSnackbarInfo({ open: true, message: \"누적 재화가 초기화되었습니다.\" });\r\n  };\r\n\r\n  const handleSnackbarClose = (event, reason) => {\r\n    if (reason === \"clickaway\") return;\r\n    setSnackbarInfo({ ...snackbarInfo, open: false });\r\n  };\r\n\r\n  if (loading) return <CircularProgress />;\r\n  if (error) return <Typography color=\"error\">오류: {error}</Typography>;\r\n\r\n  return (\r\n    <Box sx={{ mb: 2 }}>\r\n      <Button variant=\"contained\" onClick={handleOpenModal} fullWidth>\r\n        {selectedWeaponName || \"무기 선택\"}\r\n      </Button>\r\n\r\n      <WeaponSelectionModal\r\n        open={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        onWeaponSelect={handleWeaponSelect}\r\n        weaponsData={allWeaponsData}\r\n        excludedNames={excludedNames}\r\n        excludedGrades={excludedGrades}\r\n      />\r\n\r\n      {selectedWeaponData && (\r\n        <Paper elevation={3} sx={{ ...styles.selectedWeaponPaper, mt: 2 }}>\r\n          <Box\r\n            component=\"img\"\r\n            src={weaponImages[`${selectedWeaponData[\"이미지 파일\"]}.webp`]}\r\n            alt={selectedWeaponData[\"이름\"]}\r\n            sx={styles.weaponImage}\r\n          />\r\n          <Box\r\n            sx={{\r\n              flex: 1,\r\n              minWidth: 0,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" sx={styles.weaponName} noWrap>\r\n              {selectedWeaponData[\"이름\"]}\r\n            </Typography>\r\n            <Typography\r\n              variant=\"caption\"\r\n              color=\"text.secondary\"\r\n              sx={{ mt: 0.5 }}\r\n            >\r\n              등급: {selectedWeaponData[\"등급\"]}\r\n            </Typography>\r\n            <Box sx={{ display: \"flex\", alignItems: \"center\", mt: \"auto\" }}>\r\n              <Typography variant=\"h6\">+{currentLevel} 강화</Typography>\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onClick={handleSkipMenuOpen}\r\n                endIcon={<ArrowForwardIosIcon />}\r\n                sx={{ flexShrink: 0, ml: \"auto\" }}\r\n              >\r\n                건너뛰기\r\n              </Button>\r\n              <Menu\r\n                anchorEl={skipMenuAnchorEl}\r\n                open={Boolean(skipMenuAnchorEl)}\r\n                onClose={handleSkipMenuClose}\r\n                anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n              >\r\n                {availableEnhancementLevels.map((level) => (\r\n                  <MenuItem\r\n                    key={level}\r\n                    onClick={() => handleSkipToLevel(level)}\r\n                  >\r\n                    +{level} 강화\r\n                  </MenuItem>\r\n                ))}\r\n              </Menu>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      )}\r\n\r\n      {selectedWeaponData && (\r\n        <Paper elevation={3} sx={{ p: 2, mt: 2 }}>\r\n          <Box sx={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 2 }}>\r\n            {/* 확정 강화 */}\r\n            <Box sx={{ textAlign: \"center\" }}>\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                확정 강화\r\n              </Typography>\r\n              {guaranteedEnhCost ? (\r\n                <>\r\n                  <Typography variant=\"body2\">\r\n                    골드: {Number(guaranteedEnhCost[\"골드\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    무형의 파편:{\" \"}\r\n                    {Number(guaranteedEnhCost[\"무형의 파편\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    sx={{ mt: 1 }}\r\n                    onClick={handleGuaranteedEnhance}\r\n                  >\r\n                    강화\r\n                  </Button>\r\n                </>\r\n              ) : (\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  정보 없음\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n\r\n            {/* 확률 강화 */}\r\n            <Box sx={{ textAlign: \"center\" }}>\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                확률 강화\r\n              </Typography>\r\n              {probEnhCost ? (\r\n                <>\r\n                  <Typography variant=\"body2\">\r\n                    골드: {Number(probEnhCost[\"골드\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    정교한 강화석:{\" \"}\r\n                    {Number(probEnhCost[\"정교한 강화석\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    미가공 강화 원석:{\" \"}\r\n                    {Number(probEnhCost[\"미가공 강화 원석\"]).toLocaleString()}\r\n                  </Typography>\r\n                  <Box\r\n                    sx={{\r\n                      mt: 1,\r\n                      display: \"flex\",\r\n                      justifyContent: \"center\",\r\n                      gap: 1,\r\n                      flexWrap: \"wrap\",\r\n                    }}\r\n                  >\r\n                    {displayProbabilities?.success > 0 && (\r\n                      <Typography variant=\"caption\">\r\n                        성공: {(displayProbabilities.success * 100).toFixed(1)}%\r\n                      </Typography>\r\n                    )}\r\n                    {displayProbabilities?.maintain > 0 && (\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        실패: {(displayProbabilities.maintain * 100).toFixed(1)}\r\n                        %\r\n                      </Typography>\r\n                    )}\r\n                    {displayProbabilities?.fall > 0 && (\r\n                      <Typography variant=\"caption\" color=\"error\">\r\n                        하락: {(displayProbabilities.fall * 100).toFixed(1)}%\r\n                      </Typography>\r\n                    )}\r\n                    {displayProbabilities?.reset > 0 && (\r\n                      <Typography variant=\"caption\" color=\"error\">\r\n                        리셋: {(displayProbabilities.reset * 100).toFixed(1)}%\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    sx={{ mt: 1 }}\r\n                    onClick={handleProbEnhance}\r\n                  >\r\n                    강화\r\n                  </Button>\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      alignItems: \"center\",\r\n                      mt: 1,\r\n                      gap: 1,\r\n                    }}\r\n                  >\r\n                    {parseFloat(probEnhCost[\"하락 확률\"]) > 0 && (\r\n                      <Box>\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Switch\r\n                              checked={isFallPreventionOn}\r\n                              onChange={(e) =>\r\n                                setIsFallPreventionOn(e.target.checked)\r\n                              }\r\n                              size=\"small\"\r\n                            />\r\n                          }\r\n                          label=\"하락 방지\"\r\n                        />\r\n                        <Typography variant=\"caption\" display=\"block\">\r\n                          비용:{\" \"}\r\n                          {Number(\r\n                            probEnhCost[\"하락 방지 비용\"]\r\n                          ).toLocaleString()}{\" \"}\r\n                          골드\r\n                        </Typography>\r\n                      </Box>\r\n                    )}\r\n                    {parseFloat(probEnhCost[\"리셋 확률\"]) > 0 && (\r\n                      <Box>\r\n                        <FormControlLabel\r\n                          control={\r\n                            <Switch\r\n                              checked={isResetPreventionOn}\r\n                              onChange={(e) =>\r\n                                setIsResetPreventionOn(e.target.checked)\r\n                              }\r\n                              size=\"small\"\r\n                            />\r\n                          }\r\n                          label=\"리셋 방지\"\r\n                        />\r\n                        <Typography variant=\"caption\" display=\"block\">\r\n                          비용:{\" \"}\r\n                          {Number(\r\n                            probEnhCost[\"리셋 방지 비용\"]\r\n                          ).toLocaleString()}{\" \"}\r\n                          골드 +{\" \"}\r\n                          {(() => {\r\n                            const grade = selectedWeaponData[\"등급\"];\r\n                            const level = currentLevel; // 현재 레벨 기준\r\n                            if (grade === \"필멸\") return \"동일 무기 1개\";\r\n                            if (grade === \"영웅\") {\r\n                              const cost =\r\n                                level >= 7 && level <= 9\r\n                                  ? 1\r\n                                  : level >= 10 && level <= 12\r\n                                  ? 2\r\n                                  : 3;\r\n                              return `보라색 가루 ${cost}개`;\r\n                            }\r\n                            if (grade === \"전설\") {\r\n                              const cost =\r\n                                level >= 7 && level <= 9\r\n                                  ? 1\r\n                                  : level >= 10 && level <= 12\r\n                                  ? 2\r\n                                  : 3;\r\n                              return `노란색 가루 ${cost}개`;\r\n                            }\r\n                          })()}\r\n                        </Typography>\r\n                      </Box>\r\n                    )}\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  정보 없음\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      )}\r\n\r\n      {selectedWeaponData &&\r\n        (totalCosts.gold > 0 ||\r\n          totalCosts.formlessShards > 0 ||\r\n          totalCosts.refinedStones > 0 ||\r\n          totalCosts.rawOres > 0 ||\r\n          totalCosts.purplePowder > 0 ||\r\n          totalCosts.yellowPowder > 0 ||\r\n          (totalCosts.consumedWeapons &&\r\n            Object.keys(totalCosts.consumedWeapons).length > 0)) && (\r\n          <Paper elevation={3} sx={{ p: 2, mt: 2, position: \"relative\" }}>\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                mb: 1,\r\n              }}\r\n            >\r\n              <Typography variant=\"h6\">누적 소모 재화</Typography>\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onClick={handleResetCosts}\r\n              >\r\n                초기화\r\n              </Button>\r\n            </Box>\r\n            <Typography>골드: {totalCosts.gold.toLocaleString()}</Typography>\r\n            <Typography>\r\n              무형의 파편: {totalCosts.formlessShards.toLocaleString()}\r\n            </Typography>\r\n            <Typography>\r\n              정교한 강화석: {totalCosts.refinedStones.toLocaleString()}\r\n            </Typography>\r\n            <Typography>\r\n              미가공 강화 원석: {totalCosts.rawOres.toLocaleString()}\r\n            </Typography>\r\n            {totalCosts.purplePowder > 0 && (\r\n              <Typography>\r\n                보라색 가루: {totalCosts.purplePowder.toLocaleString()}\r\n              </Typography>\r\n            )}\r\n            {totalCosts.yellowPowder > 0 && (\r\n              <Typography>\r\n                노란색 가루: {totalCosts.yellowPowder.toLocaleString()}\r\n              </Typography>\r\n            )}\r\n            {totalCosts.consumedWeapons &&\r\n              Object.entries(totalCosts.consumedWeapons).map(\r\n                ([name, count]) => (\r\n                  <Typography key={name}>\r\n                    소모된 {name}: {count.toLocaleString()}개\r\n                  </Typography>\r\n                )\r\n              )}\r\n          </Paper>\r\n        )}\r\n\r\n      <Snackbar\r\n        open={snackbarInfo.open}\r\n        autoHideDuration={3000}\r\n        onClose={handleSnackbarClose}\r\n        message={snackbarInfo.message}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, {\r\n  useState,\r\n  useMemo,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Paper,\r\n  TableContainer,\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  CircularProgress,\r\n  Alert,\r\n} from \"@mui/material\";\r\nimport Papa from \"papaparse\";\r\nimport { CacheContext } from \"../../../contexts/CacheContext\";\r\n\r\nconst BASE_URL_ID = \"1IZra9ZZRwBBgT4ai1W0fCATeFFsztHnF0k03DmLr1tI\";\r\nconst GID = \"882618671\"; // 클래스 무기 강화 데이터 시트 GID\r\nconst SHEET_URL = `https://docs.google.com/spreadsheets/d/${BASE_URL_ID}/export?format=csv&gid=${GID}`;\r\n\r\nexport default function ClassWeapon() {\r\n  const { cache, setCacheValue } = useContext(CacheContext);\r\n  const [data, setData] = useState(cache.classWeaponEnh || null);\r\n  const [loading, setLoading] = useState(!cache.classWeaponEnh);\r\n  const [fetchError, setFetchError] = useState(null);\r\n\r\n  const [currentAdvTier, setCurrentAdvTier] = useState(\"\");\r\n  const [currentEnhanceLevel, setCurrentEnhanceLevel] = useState(\"\");\r\n  const [targetAdvTier, setTargetAdvTier] = useState(\"\");\r\n  const [targetEnhanceLevel, setTargetEnhanceLevel] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (cache.classWeaponEnh) {\r\n        setData(cache.classWeaponEnh);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setFetchError(null);\r\n      try {\r\n        const response = await fetch(SHEET_URL);\r\n        if (!response.ok) {\r\n          throw new Error(\"데이터를 가져오는 데 실패했습니다.\");\r\n        }\r\n        const csvText = await response.text();\r\n\r\n        Papa.parse(csvText, {\r\n          header: true,\r\n          skipEmptyLines: true,\r\n          complete: (results) => {\r\n            const parsedData = results.data.filter(\r\n              (row) => row[\"전직 차수\"] && row[\"강화 차수\"]\r\n            );\r\n            setData(parsedData);\r\n            setCacheValue(\"classWeaponEnh\", parsedData);\r\n            setLoading(false);\r\n          },\r\n          error: (err) => {\r\n            throw new Error(err.message);\r\n          },\r\n        });\r\n      } catch (e) {\r\n        setFetchError(e.message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [cache.classWeaponEnh, setCacheValue]);\r\n\r\n  const advTiers = useMemo(() => {\r\n    if (!data) return [];\r\n    return [...new Set(data.map((item) => item[\"전직 차수\"]))].sort(\r\n      (a, b) => a - b\r\n    );\r\n  }, [data]);\r\n\r\n  const getEnhanceLevels = useCallback(\r\n    (tier) => {\r\n      if (!data || !tier) return [];\r\n      return data\r\n        .filter((item) => item[\"전직 차수\"] === tier)\r\n        .map((item) => item[\"강화 차수\"])\r\n        .sort((a, b) => a - b);\r\n    },\r\n    [data]\r\n  );\r\n\r\n  const currentEnhanceLevels = useMemo(\r\n    () => getEnhanceLevels(currentAdvTier),\r\n    [getEnhanceLevels, currentAdvTier]\r\n  );\r\n  const targetEnhanceLevels = useMemo(\r\n    () => getEnhanceLevels(targetAdvTier),\r\n    [getEnhanceLevels, targetAdvTier]\r\n  );\r\n\r\n  const { totalCost, error } = useMemo(() => {\r\n    if (\r\n      !data ||\r\n      currentAdvTier === \"\" ||\r\n      currentEnhanceLevel === \"\" ||\r\n      targetAdvTier === \"\" ||\r\n      targetEnhanceLevel === \"\"\r\n    ) {\r\n      return { totalCost: null, error: null };\r\n    }\r\n\r\n    if (\r\n      parseInt(currentAdvTier, 10) > parseInt(targetAdvTier, 10) ||\r\n      (parseInt(currentAdvTier, 10) === parseInt(targetAdvTier, 10) &&\r\n        parseInt(currentEnhanceLevel, 10) >= parseInt(targetEnhanceLevel, 10))\r\n    ) {\r\n      return {\r\n        totalCost: null,\r\n        error: \"목표 단계는 현재 단계보다 높아야 합니다.\",\r\n      };\r\n    }\r\n\r\n    const resources = [\r\n      \"골드\",\r\n      \"무형의 파편\",\r\n      \"강화 재료 1\",\r\n      \"강화 재료 2\",\r\n      \"강화 재료 3\",\r\n    ];\r\n    const total = {\r\n      골드: 0,\r\n      \"무형의 파편\": 0,\r\n    };\r\n\r\n    const startIndex = data.findIndex(\r\n      (d) =>\r\n        d[\"전직 차수\"] === currentAdvTier &&\r\n        d[\"강화 차수\"] === currentEnhanceLevel\r\n    );\r\n    const endIndex = data.findIndex(\r\n      (d) =>\r\n        d[\"전직 차수\"] === targetAdvTier &&\r\n        d[\"강화 차수\"] === targetEnhanceLevel\r\n    );\r\n\r\n    // 현재 단계의 다음 단계부터 목표 단계까지의 비용을 합산합니다.\r\n    for (let i = startIndex + 1; i <= endIndex; i++) {\r\n      resources.forEach((res) => {\r\n        const value = data[i][res];\r\n        if (value) {\r\n          if (res.startsWith(\"강화 재료\")) {\r\n            const match = value.match(/([^\\d]+)\\s*(\\d+)/);\r\n            if (match) {\r\n              const [, name, amount] = match;\r\n              total[name.trim()] =\r\n                (total[name.trim()] || 0) + parseInt(amount, 10);\r\n            }\r\n          } else {\r\n            total[res] = (total[res] || 0) + parseInt(value, 10);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    return { totalCost: total, error: null };\r\n  }, [\r\n    data,\r\n    currentAdvTier,\r\n    currentEnhanceLevel,\r\n    targetAdvTier,\r\n    targetEnhanceLevel,\r\n  ]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ display: \"flex\", justifyContent: \"center\", p: 3 }}>\r\n        <CircularProgress />\r\n        <Typography sx={{ ml: 2 }}>강화 비용 정보를 불러오는 중...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (fetchError) {\r\n    return <Alert severity=\"error\">{fetchError}</Alert>;\r\n  }\r\n\r\n  const renderSelector = (label, value, handler, options) => (\r\n    <FormControl fullWidth sx={{ mb: 2 }}>\r\n      <InputLabel>{label}</InputLabel>\r\n      <Select\r\n        value={value}\r\n        label={label}\r\n        onChange={(e) => handler(e.target.value)}\r\n      >\r\n        {options.map((opt) => (\r\n          <MenuItem key={opt} value={opt}>\r\n            {opt}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n    </FormControl>\r\n  );\r\n\r\n  return (\r\n    <Box sx={{ p: 2 }}>\r\n      {/* <Typography variant=\"h5\" gutterBottom>\r\n        클래스 무기 강화 시뮬레이터\r\n      </Typography> */}\r\n      <Paper sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"h6\">현재 단계</Typography>\r\n        {renderSelector(\r\n          \"전직 차수\",\r\n          currentAdvTier,\r\n          setCurrentAdvTier,\r\n          advTiers\r\n        )}\r\n        {renderSelector(\r\n          \"강화 레벨\",\r\n          currentEnhanceLevel,\r\n          setCurrentEnhanceLevel,\r\n          currentEnhanceLevels\r\n        )}\r\n      </Paper>\r\n      <Paper sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"h6\">목표 단계</Typography>\r\n        {renderSelector(\"전직 차수\", targetAdvTier, setTargetAdvTier, advTiers)}\r\n        {renderSelector(\r\n          \"강화 레벨\",\r\n          targetEnhanceLevel,\r\n          setTargetEnhanceLevel,\r\n          targetEnhanceLevels\r\n        )}\r\n      </Paper>\r\n\r\n      {error && <Alert severity=\"error\">{error}</Alert>}\r\n\r\n      {totalCost && !error && (\r\n        <TableContainer component={Paper}>\r\n          <Table size=\"small\">\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell\r\n                  colSpan={2}\r\n                  sx={{ fontWeight: \"bold\", textAlign: \"center\" }}\r\n                >\r\n                  필요 재료 총합\r\n                </TableCell>\r\n              </TableRow>\r\n              {Object.entries(totalCost).map(\r\n                ([key, value]) =>\r\n                  value > 0 && (\r\n                    <TableRow key={key}>\r\n                      <TableCell>{key}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {value.toLocaleString()}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Box, Typography, Container, AppBar, Tabs, Tab } from \"@mui/material\";\r\nimport SpecialWeapon from \"./SpecialWeapon\";\r\nimport ClassWeapon from \"./ClassWeapon\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`enh-sim-tabpanel-${index}`}\r\n      aria-labelledby={`enh-sim-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 3 }}>\r\n          <Typography component=\"div\">{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function EnhSim() {\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <Box sx={{ my: 2, textAlign: \"center\" }}>\r\n          <Typography variant=\"h5\" component=\"h1\" gutterBottom>\r\n            강화 시뮬레이터\r\n          </Typography>\r\n        </Box>\r\n      </Container>\r\n      <Box sx={{ width: \"100%\" }}>\r\n        <AppBar position=\"static\">\r\n          <Tabs value={value} onChange={handleChange} variant=\"fullWidth\">\r\n            <Tab label=\"특수 무기\" />\r\n            <Tab label=\"클래스 무기\" />\r\n          </Tabs>\r\n        </AppBar>\r\n        <TabPanel value={value} index={0}>\r\n          <SpecialWeapon />\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1}>\r\n          <ClassWeapon />\r\n        </TabPanel>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n"],"names":["modalStyle","position","top","left","transform","width","maxWidth","bgcolor","border","boxShadow","p","maxHeight","overflowY","modalGrid","display","gridTemplateColumns","gap","modalWeaponImage","height","objectFit","backgroundColor","modalWeaponName","fontSize","images","require","weaponImages","keys","reduce","acc","item","replace","_ref","open","onClose","onWeaponSelect","weaponsData","excludedNames","Set","excludedGrades","getBaseWeaponData","useCallback","name","find","w","parseInt","uniqueWeaponNames","useMemo","nameCounts","Array","from","map","filter","has","weapon","_jsx","Modal","children","_jsxs","Box","sx","styles","Typography","variant","component","mb","Card","grade","textAlign","getCardColorByGrade","color","flexDirection","justifyContent","CardActionArea","onClick","CardMedia","image","concat","alt","CardContent","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","Object","resolve","module","exports","selectedWeaponPaper","alignItems","weaponImage","borderRadius","weaponName","fontWeight","BASE_URL_ID","WEAPONS_SHEET_URL","GUARANTEED_ENH_URL","PROB_ENH_URL","SIM_STATE_CACHE_KEY","SpecialWeapon","cache","setCacheValue","useContext","CacheContext","weapons","allWeaponsData","guaranteedEnhCosts","setGuaranteedEnhCosts","useState","probEnhCosts","setProbEnhCosts","loading","setLoading","error","setError","isModalOpen","setIsModalOpen","initialTotalCosts","gold","formlessShards","refinedStones","rawOres","purplePowder","yellowPowder","consumedWeapons","selectedWeaponName","setSelectedWeaponName","savedStateJSON","sessionStorage","getItem","JSON","parse","console","currentLevel","setCurrentLevel","totalCosts","setTotalCosts","savedState","skipMenuAnchorEl","setSkipMenuAnchorEl","isFallPreventionOn","setIsFallPreventionOn","isResetPreventionOn","setIsResetPreventionOn","snackbarInfo","setSnackbarInfo","message","useEffect","isEnhanceable","stateToSave","setItem","stringify","async","fetchAndParse","url","cacheKey","response","fetch","ok","csvText","text","Promise","reject","Papa","header","skipEmptyLines","complete","results","data","row","values","some","val","trim","err","guaranteedData","probData","all","fetchData","selectedWeaponData","availableEnhancementLevels","level","isNaN","sort","a","b","handleSkipMenuClose","handleCloseModal","guaranteedEnhCost","nextLevel","cost","probEnhCost","displayProbabilities","success","parseFloat","maintain","fall","reset","reducedSuccess","nextProbEnhCost","CircularProgress","Button","handleOpenModal","fullWidth","WeaponSelectionModal","Paper","elevation","_objectSpread","mt","src","flex","minWidth","noWrap","size","event","currentTarget","endIcon","ArrowForwardIosIcon","flexShrink","ml","Menu","anchorEl","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","gutterBottom","_Fragment","Number","toLocaleString","handleGuaranteedEnhance","goldCost","shardCost","prev","flexWrap","toFixed","handleProbEnhance","refinedStoneCost","rawOreCost","successRate","fallRate","resetRate","rand","Math","random","resultMessage","additionalCosts","max","weaponGrade","additionalResultMessage","powderCost","includes","FormControlLabel","control","Switch","checked","onChange","target","label","length","handleResetCosts","entries","count","Snackbar","autoHideDuration","handleSnackbarClose","reason","SHEET_URL","ClassWeapon","setData","classWeaponEnh","fetchError","setFetchError","currentAdvTier","setCurrentAdvTier","currentEnhanceLevel","setCurrentEnhanceLevel","targetAdvTier","setTargetAdvTier","targetEnhanceLevel","setTargetEnhanceLevel","parsedData","advTiers","getEnhanceLevels","tier","currentEnhanceLevels","targetEnhanceLevels","totalCost","resources","total","골드","startIndex","findIndex","d","endIndex","i","forEach","res","value","startsWith","match","amount","Alert","severity","renderSelector","handler","options","FormControl","InputLabel","Select","opt","TableContainer","Table","TableBody","TableRow","TableCell","colSpan","key","align","TabPanel","props","index","other","_objectWithoutProperties","_excluded","role","hidden","EnhSim","setValue","Container","my","AppBar","Tabs","handleChange","newValue","Tab"],"sourceRoot":""}